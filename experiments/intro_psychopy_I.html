
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Experimentation I - Introduction to PsychoPy I &#8212; Winter - 2022</title>
    
  <link href="../_static/css/theme.css" rel="stylesheet">
  <link href="../_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/sphinx-book-theme.css?digest=c3fdc42140077d1ad13ad2f1588a4309" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../_static/js/index.be7d3bbb2ef33a8344ce.js">

    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/togglebutton.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script async="async" kind="hypothesis" src="https://hypothes.is/embed.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/sphinx-book-theme.d59cb220de22ca1c485ebbdc042f0030.js"></script>
    <script async="async" src="https://unpkg.com/thebe@0.5.1/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Python module showcases" href="../showcases/module_showcases.html" />
    <link rel="prev" title="Running experiments in Python" href="experiments.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="../_static/pfp_logo.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">Winter - 2022</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../index.html">
   Welcome!
  </a>
 </li>
</ul>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../dei.html">
   Diversity, Equity and Inclusion
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../overview.html">
   Course overview &amp; procedure
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../setup.html">
   Setup for the course
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../outline.html">
   General outline
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../introduction/introduction.html">
   Introduction
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../introduction/introduction_1.html">
     Introduction I
    </a>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../introduction/introduction_2.html">
     Introduction II
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
    <label for="toctree-checkbox-2">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../introduction/intro_to_shell.html">
       Introduction II - the (unix) command line: bash
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../introduction/introduction_3.html">
     Introduction III
    </a>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../introduction/introduction_4.html">
     Introduction IV
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
    <label for="toctree-checkbox-3">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../introduction/intro_jupyter.html">
       Introduction IV - the jupyter ecosystem &amp; notebooks
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../introduction/introduction_5.html">
     Introduction V
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/>
    <label for="toctree-checkbox-4">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../introduction/intro_python_I.html">
       Introduction V - Introduction to Python - I
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../introduction/introduction_6.html">
     Introduction VI
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/>
    <label for="toctree-checkbox-5">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../introduction/intro_python_II.html">
       Introduction VI - Introduction to Python II
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../introduction/introduction_7.html">
     Introduction VII
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/>
    <label for="toctree-checkbox-6">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../introduction/intro_python_III.html">
       Introduction VII - Introduction to Python III
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="experiments.html">
   Running experiments in Python
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/>
  <label for="toctree-checkbox-7">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
     Experimentation I - Introduction to PsychoPy I
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../showcases/module_showcases.html">
   Python module showcases
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/>
  <label for="toctree-checkbox-8">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../showcases/python_numpy.html">
     Introduction to NumPy
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../showcases/python_scipy.html">
     Introduction to SciPy
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../showcases/python_scikit.html">
     Introduction to scikit-learn &amp; scikit-image
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../showcases/python_visualization_for_data.html">
     Visualization of different data types with python
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../showcases/image_manipulation_nibabel.html">
     Using Python for neuroimaging data - NiBabel
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../showcases/image_manipulation_nilearn.html">
     Using Python for neuroimaging data - Nilearn
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../showcases/statistical_analyses_MRI.html">
     Nilearn GLM: statistical analyses of MRI in Python
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../showcases/functional_connectivity.html">
     Functional connectivity and resting state
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../showcases/diffusion_imaging.html">
     Structural connectivity and diffusion imaging
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../showcases/machine_learning_preparation.html">
     Preparation Machine Learning
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../showcases/machine_learning_nilearn.html">
     MVPA and Searchlight with
     <code class="docutils literal notranslate">
      <span class="pre">
       nilearn
      </span>
     </code>
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../showcases/machine_learning_keras.html">
     <code class="docutils literal notranslate">
      <span class="pre">
       TensorFlow
      </span>
     </code>
     /
     <code class="docutils literal notranslate">
      <span class="pre">
       Keras
      </span>
     </code>
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../showcases/Predicting_age_with_machine_learning.html">
     Machine learning to predict age from rs-fmri
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../questionnaires.html">
   Questionnaire templates
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../break.html">
   Yoga and/or dance break
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../CoC.html">
   Code of Conduct
  </a>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../_sources/experiments/intro_psychopy_I.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
                onclick="printPdf(this)" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://m-earnest.github.io/Python_for_Psychologists_Winter2022/"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        <a class="issues-button"
            href="https://m-earnest.github.io/Python_for_Psychologists_Winter2022//issues/new?title=Issue%20on%20page%20%2Fexperiments/intro_psychopy_I.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Open an issue"><i class="fas fa-lightbulb"></i>open issue</button></a>
        <a class="edit-button" href="https://github.com/m-earnest.github.io/Python_for_Psychologists_Winter2022/edit/master/lecture/experiments/intro_psychopy_I.ipynb"><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Edit this page"><i class="fas fa-pencil-alt"></i>suggest edit</button></a>
    </div>
</div>

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show noprint">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav" aria-label="Page">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#objectives">
   Objectives 📍
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#important-note">
   Important note
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#outline">
   Outline
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#prerequisites">
   Prerequisites
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#computing-environments">
     Computing environments
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#folders-files">
     Folders &amp; files
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#vscode-setup">
     VScode setup
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#psychopy-basics">
   <code class="docutils literal notranslate">
    <span class="pre">
     PsychoPy
    </span>
   </code>
   basics
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#what-is-psychopy">
     What is
     <code class="docutils literal notranslate">
      <span class="pre">
       PsychoPy
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#idea-goals-of-psychopy">
     Idea/goals of
     <code class="docutils literal notranslate">
      <span class="pre">
       PsychoPy
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#things-to-check-evaluate">
     Things to check/evaluate
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#the-general-idea">
     The general idea
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#input-via-dialog-boxes">
     Input via dialog boxes
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#presenting-instructions">
     Presenting instructions
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#psychopy-working-principles">
   PsychoPy working principles
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#drawing-flipping">
     <code class="docutils literal notranslate">
      <span class="pre">
       Draw
      </span>
     </code>
     ing &amp;
     <code class="docutils literal notranslate">
      <span class="pre">
       flip
      </span>
     </code>
     ping
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#waiting-for-input">
     Waiting for Input
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#trials">
     <code class="docutils literal notranslate">
      <span class="pre">
       trials
      </span>
     </code>
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#input-output">
   Input/output
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#collecting-responses">
     Collecting responses
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#saving-data">
     Saving data
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#a-very-simple-experiment">
   A very simple experiment
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#outro">
   Outro
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#homework-assignment-6">
     Homework assignment #6
    </a>
   </li>
  </ul>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Experimentation I - Introduction to PsychoPy I</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#objectives">
   Objectives 📍
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#important-note">
   Important note
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#outline">
   Outline
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#prerequisites">
   Prerequisites
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#computing-environments">
     Computing environments
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#folders-files">
     Folders &amp; files
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#vscode-setup">
     VScode setup
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#psychopy-basics">
   <code class="docutils literal notranslate">
    <span class="pre">
     PsychoPy
    </span>
   </code>
   basics
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#what-is-psychopy">
     What is
     <code class="docutils literal notranslate">
      <span class="pre">
       PsychoPy
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#idea-goals-of-psychopy">
     Idea/goals of
     <code class="docutils literal notranslate">
      <span class="pre">
       PsychoPy
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#things-to-check-evaluate">
     Things to check/evaluate
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#the-general-idea">
     The general idea
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#input-via-dialog-boxes">
     Input via dialog boxes
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#presenting-instructions">
     Presenting instructions
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#psychopy-working-principles">
   PsychoPy working principles
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#drawing-flipping">
     <code class="docutils literal notranslate">
      <span class="pre">
       Draw
      </span>
     </code>
     ing &amp;
     <code class="docutils literal notranslate">
      <span class="pre">
       flip
      </span>
     </code>
     ping
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#waiting-for-input">
     Waiting for Input
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#trials">
     <code class="docutils literal notranslate">
      <span class="pre">
       trials
      </span>
     </code>
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#input-output">
   Input/output
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#collecting-responses">
     Collecting responses
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#saving-data">
     Saving data
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#a-very-simple-experiment">
   A very simple experiment
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#outro">
   Outro
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#homework-assignment-6">
     Homework assignment #6
    </a>
   </li>
  </ul>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            
              <div>
                
  <div class="section" id="experimentation-i-introduction-to-psychopy-i">
<h1>Experimentation I - Introduction to PsychoPy I<a class="headerlink" href="#experimentation-i-introduction-to-psychopy-i" title="Permalink to this headline">¶</a></h1>
<p><a class="reference external" href="https://github.com/M-earnest">Michael Ernst</a><br />
Phd student - <a class="reference external" href="http://www.fiebachlab.org/">Fiebach Lab</a>, <a class="reference external" href="https://www.psychologie.uni-frankfurt.de/49868684/Abteilungen">Neurocognitive Psychology</a> at <a class="reference external" href="https://www.goethe-university-frankfurt.de/en?locale=en">Goethe-University Frankfurt</a></p>
<p><a class="reference external" href="https://peerherholz.github.io/">Peer Herholz (he/him)</a><br />
Research affiliate - <a class="reference external" href="https://neurodatascience.github.io/">NeuroDataScience lab</a> at <a class="reference external" href="https://www.mcgill.ca/neuro/">MNI</a>/<a class="reference external" href="https://www.mcgill.ca/">McGill</a><br />
Member - <a class="reference external" href="https://bids-specification.readthedocs.io/en/stable/">BIDS</a>, <a class="reference external" href="https://www.repronim.org/">ReproNim</a>, <a class="reference external" href="https://brainhack.org/">Brainhack</a>, <a class="reference external" href="https://www.cneuromod.ca/">Neuromod</a>, <a class="reference external" href="https://ohbm-environment.org/">OHBM SEA-SIG</a>, <a class="reference external" href="https://sites.google.com/view/unique-neuro-ai">UNIQUE</a></p>
<p><img align="left" src="https://raw.githubusercontent.com/G0RELLA/gorella_mwn/master/lecture/static/Twitter%20social%20icons%20-%20circle%20-%20blue.png" alt="logo" title="Twitter" width="32" height="20" /> <img align="left" src="https://raw.githubusercontent.com/G0RELLA/gorella_mwn/master/lecture/static/GitHub-Mark-120px-plus.png" alt="logo" title="Github" width="30" height="20" />     &#64;peerherholz</p>
</br>
</br>
</br>
This lecture was prepared by Peer Herholz and further adapted and expanded for this course by Michael Ernst.<div class="section" id="objectives">
<h2>Objectives 📍<a class="headerlink" href="#objectives" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>get to know the <a class="reference external" href="https://www.psychopy.org/">PsychoPy</a> library</p></li>
<li><p>learn basic and efficient usage of its <code class="docutils literal notranslate"><span class="pre">module</span></code>s and <code class="docutils literal notranslate"><span class="pre">function</span></code>s to create <em>simple</em> experiments</p></li>
</ul>
</div>
<div class="section" id="important-note">
<h2>Important note<a class="headerlink" href="#important-note" title="Permalink to this headline">¶</a></h2>
<p>The main content of this section will be presented via a mixture of <span class="xref myst">slides</span> and <span class="xref myst">VScode</span> which is further outlined in the <span class="xref myst">respective section of the course website</span> and <span class="xref myst">slides</span>. As noted there, <code class="docutils literal notranslate"><span class="pre">jupyter</span> <span class="pre">notebooks</span></code> aren’t the best way to work on and run experiments using <code class="docutils literal notranslate"><span class="pre">PsychoPy</span></code>, instead we need to switch to <code class="docutils literal notranslate"><span class="pre">IDE</span></code>s for this part of the course. Specifically, we will use <code class="docutils literal notranslate"><span class="pre">VScode</span></code> for this.</p>
<img align="center" src="https://raw.githubusercontent.com/PeerHerholz/Python_for_Psychologists_Winter2021/master/lecture/static/ipynb_IDE.png" alt="logo" title="jupyter" width="800" height="300" /> 
<p>This <code class="docutils literal notranslate"><span class="pre">notebook</span></code> is thus not intended as the main resource and you shouldn’t try to test/run the experiment via the here included <code class="docutils literal notranslate"><span class="pre">code</span> <span class="pre">cells</span></code>. Rather, this is meant to be an add-on resource that presents some of the content and especially <code class="docutils literal notranslate"><span class="pre">code</span></code> in a more condensed form. We hope it will be useful/helpful for you.</p>
</div>
<div class="section" id="outline">
<h2>Outline<a class="headerlink" href="#outline" title="Permalink to this headline">¶</a></h2>
<p>Within this notebook we will go through the basic and required steps to create a new experiment using <code class="docutils literal notranslate"><span class="pre">PsychoPy</span></code>, including:</p>
<ol class="simple">
<li><p>Prerequisites<br />
1.1 Computing environment<br />
1.2 Folders &amp; Files</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PsychoPy</span></code> basics<br />
2.1 The general idea<br />
2.2 Input via <code class="docutils literal notranslate"><span class="pre">dialog</span> <span class="pre">boxes</span></code><br />
2.3 Presenting instructions</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PsychoPy</span></code>’s working principles<br />
3.1 <code class="docutils literal notranslate"><span class="pre">draw</span></code>ing &amp; <code class="docutils literal notranslate"><span class="pre">flip</span></code>ping<br />
3.2 <code class="docutils literal notranslate"><span class="pre">trial</span></code>s</p></li>
<li><p>Input/output<br />
4.1 collecting responses<br />
4.2 saving data</p></li>
<li><p>A very simple experiment</p></li>
</ol>
</div>
<div class="section" id="prerequisites">
<h2>Prerequisites<a class="headerlink" href="#prerequisites" title="Permalink to this headline">¶</a></h2>
<p>Starting new experiments in <code class="docutils literal notranslate"><span class="pre">PsychoPy</span></code> follows the same guidelines as starting new projects in general. This includes the following:</p>
<ul class="simple">
<li><p>create and store everything in a dedicated place on your machine</p></li>
<li><p>create and use a dedicated computing environment</p></li>
<li><p>document everything or at least as much as possible</p></li>
<li><p>test and save things in very short intervals, basically after every change</p></li>
</ul>
<img align="center" src="https://raw.githubusercontent.com/PeerHerholz/Python_for_Psychologists_Winter2021/master/lecture/static/experiment_prereq.png" alt="logo" title="jupyter" width="800" height="200" /> 
<div class="section" id="computing-environments">
<h3>Computing environments<a class="headerlink" href="#computing-environments" title="Permalink to this headline">¶</a></h3>
<p>As addressed during the first weeks of the course, <code class="docutils literal notranslate"><span class="pre">computing</span> <span class="pre">environments</span></code> are essential when programming, not only in <code class="docutils literal notranslate"><span class="pre">Python</span></code>. This refers to reproducibility, transfer/sharing of code and many other factors. Lucky for us <code class="docutils literal notranslate"><span class="pre">Python</span></code> makes it easy to <code class="docutils literal notranslate"><span class="pre">create</span></code> and <code class="docutils literal notranslate"><span class="pre">manage</span></code> <code class="docutils literal notranslate"><span class="pre">computing</span> <span class="pre">environments</span></code>, for example using <span class="xref myst">conda</span>.</p>
<p>We can thus also use it to create a new <code class="docutils literal notranslate"><span class="pre">computing</span> <span class="pre">environment</span></code> specifically dedicated to creating and running a new experiment using <code class="docutils literal notranslate"><span class="pre">PsychoPy</span></code>. Here we will name it <code class="docutils literal notranslate"><span class="pre">psychopy</span></code> and include/install a few dependencies we already know.</p>
<p><em><strong>Note</strong></em>: Now for you wsl-folks this probably won’t work as intended, therefore we had you download the standalone version of <code class="docutils literal notranslate"><span class="pre">Psychopy</span></code>, so you can safely skipt the cell below.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%</span><span class="k">bash</span>

conda create -n psychopy psychopy

conda activate psychopy

pip install jedi psychtoolbox pygame pyo pyobjc   
            python-vlc ujson
</pre></div>
</div>
</div>
</div>
<p>With these few steps we have our (initial) <code class="docutils literal notranslate"><span class="pre">computing</span> <span class="pre">environment</span></code> ready to go!</p>
<p>Let’s continue with creating <code class="docutils literal notranslate"><span class="pre">folders</span></code> and <code class="docutils literal notranslate"><span class="pre">files</span></code> we need.</p>
</div>
<div class="section" id="folders-files">
<h3>Folders &amp; files<a class="headerlink" href="#folders-files" title="Permalink to this headline">¶</a></h3>
<p>As mentioned above, it’s a good idea to keep things handy and organized. Obviously, this also holds true for running experiments using <code class="docutils literal notranslate"><span class="pre">PsychoPy</span></code>. While there are several ways we could do this, at the minimum we need a dedicated <code class="docutils literal notranslate"><span class="pre">folder</span></code> or <code class="docutils literal notranslate"><span class="pre">directory</span></code> somewhere on our machine within which we will store all corresponding information and <code class="docutils literal notranslate"><span class="pre">files</span></code>. Creating a new <code class="docutils literal notranslate"><span class="pre">directory</span></code> is no biggie using <code class="docutils literal notranslate"><span class="pre">bash</span></code>. We can simply use <code class="docutils literal notranslate"><span class="pre">mkdir</span></code> and specify the wanted <code class="docutils literal notranslate"><span class="pre">path</span></code> and <code class="docutils literal notranslate"><span class="pre">name</span></code>. For the sake of simplicity, let’s put everything in a folder called <code class="docutils literal notranslate"><span class="pre">psychopy_experiment</span></code> on our <code class="docutils literal notranslate"><span class="pre">Desktop</span></code>s.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%</span><span class="k">bash</span>
mkdir /path/to/your/Desktop/psychopy_environment
</pre></div>
</div>
</div>
</div>
<p>If you’d prefer to just stick with Python you could instead make use of the <code class="docutils literal notranslate"><span class="pre">os</span></code>module, like so:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>import os
os.makedirs(&#39;/path/to/your/Desktop/psychopy_environment&#39;)
</pre></div>
</div>
<p>But it’s a good exercise to get aquainted with bash, so let’s continue with that.</p>
<p>Now we will change our <code class="docutils literal notranslate"><span class="pre">current</span> <span class="pre">working</span> <span class="pre">directory</span></code> to this new folder</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%</span><span class="k">bash</span>
cd /path/to/your/Desktop/psychopy_environment
</pre></div>
</div>
</div>
</div>
<p>and once there, create a new <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">script</span></code>, i.e. an empty <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">file</span></code>. For this we can use <code class="docutils literal notranslate"><span class="pre">bash</span></code>s <code class="docutils literal notranslate"><span class="pre">touch</span></code> <code class="docutils literal notranslate"><span class="pre">function</span></code> followed by the desired <code class="docutils literal notranslate"><span class="pre">filename</span></code>. Keeping things simple again, we will name it <code class="docutils literal notranslate"><span class="pre">experiment.py</span></code> (notice the file extension <code class="docutils literal notranslate"><span class="pre">.py</span></code>).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%</span><span class="k">bash</span>
touch experiment.py
</pre></div>
</div>
</div>
</div>
<p>Within this, currently empty, <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">file</span></code>/<code class="docutils literal notranslate"><span class="pre">script</span></code> we will put our <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">code</span></code> needed to <code class="docutils literal notranslate"><span class="pre">run</span></code> the <code class="docutils literal notranslate"><span class="pre">experiment</span></code>.</p>
</div>
<div class="section" id="vscode-setup">
<h3>VScode setup<a class="headerlink" href="#vscode-setup" title="Permalink to this headline">¶</a></h3>
<p>Once more: please remember that we’re switching to an <code class="docutils literal notranslate"><span class="pre">IDE</span></code> for this part of the course, specifically <code class="docutils literal notranslate"><span class="pre">VScode</span></code>, as <code class="docutils literal notranslate"><span class="pre">jupyter</span> <span class="pre">notebooks</span></code> aren’t the most feasible way to implement/test/run <code class="docutils literal notranslate"><span class="pre">experiment</span></code>s via <code class="docutils literal notranslate"><span class="pre">PsychoPy</span></code>. Therefore, please open <code class="docutils literal notranslate"><span class="pre">VScode</span></code> and within it open the folder we just created (<code class="docutils literal notranslate"><span class="pre">File</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">Open</span> <span class="pre">Folder</span></code>). Next, click on the <code class="docutils literal notranslate"><span class="pre">experiment.py</span></code> file which should open in the <code class="docutils literal notranslate"><span class="pre">editor</span></code> window.</p>
<p>With that your setup is ready for our <code class="docutils literal notranslate"><span class="pre">PsychoPy</span></code> adventure and should look roughly like below:</p>
<img align="center" src="https://raw.githubusercontent.com/PeerHerholz/Python_for_Psychologists_Winter2021/master/lecture/static/vscode_setup.png" alt="logo" title="jupyter" width="800" height="400" /> </div>
</div>
<div class="section" id="psychopy-basics">
<h2><code class="docutils literal notranslate"><span class="pre">PsychoPy</span></code> basics<a class="headerlink" href="#psychopy-basics" title="Permalink to this headline">¶</a></h2>
<p>It’s already time to talk about <code class="docutils literal notranslate"><span class="pre">PsychoPy</span></code>, one of the <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">libraries</span></code> intended to run <code class="docutils literal notranslate"><span class="pre">experiments</span></code> and acquire <code class="docutils literal notranslate"><span class="pre">data</span></code>. For more information regarding different software and options, their advantages and drawbacks, please consult the <a class="reference external" href="https://m-earnest.github.io/Python_for_Psychologists_Winter2022/experiments/experiments.html">slides</a>.</p>
<img align="center" src="https://www.psychopy.org/_static/psychopyLogoOnlineStrap_h480.png" alt="logo" title="jupyter" width="600" height="300" /> 
<p>Make sure to check the <a class="reference external" href="https://www.psychopy.org/"><code class="docutils literal notranslate"><span class="pre">PsychoPy</span></code> website</a>, <a class="reference external" href="https://psychopy.org/documentation.html">documentation</a> and <a class="reference external" href="https://discourse.psychopy.org/">forum</a>.</p>
<div class="section" id="what-is-psychopy">
<h3>What is <code class="docutils literal notranslate"><span class="pre">PsychoPy</span></code><a class="headerlink" href="#what-is-psychopy" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Psychology software in <code class="docutils literal notranslate"><span class="pre">Python</span></code>, i.e. a <code class="docutils literal notranslate"><span class="pre">Python</span> <span class="pre">library</span></code>, i.e. completely written in <code class="docutils literal notranslate"><span class="pre">Python</span></code></p></li>
<li><p>2002-2003: Jon Pierce began work on this for his own lab (visual neuroscience)</p></li>
<li><p>2003-2017: a purely volunteer-driven, evenings and weekends project</p></li>
<li><p>2017-now: still open source and free to install but with professional support</p></li>
</ul>
</div>
<div class="section" id="idea-goals-of-psychopy">
<h3>Idea/goals of <code class="docutils literal notranslate"><span class="pre">PsychoPy</span></code><a class="headerlink" href="#idea-goals-of-psychopy" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>allow scientists to run as wide a range of experiments as possible, easily and via standard computer hardware</p></li>
<li><p>precise enough for psychophysics</p></li>
<li><p>intuitive enough for (undergraduate) psychology (no offence)</p></li>
<li><p>flexible enough for everything else</p></li>
<li><p>capable of running studies in the lab or online</p></li>
<li><p>can work with pure python flows, but adds additional functionality on top of that</p></li>
</ul>
</div>
<div class="section" id="things-to-check-evaluate">
<h3>Things to check/evaluate<a class="headerlink" href="#things-to-check-evaluate" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>computer hardware settings &amp; interfaces</p></li>
<li><p>rapid software development</p></li>
<li><p>always check version</p></li>
<li><p>set <code class="docutils literal notranslate"><span class="pre">version</span></code> in <code class="docutils literal notranslate"><span class="pre">experiment</span></code></p></li>
<li><p>use <code class="docutils literal notranslate"><span class="pre">environments</span></code> for <code class="docutils literal notranslate"><span class="pre">experiments</span></code></p></li>
<li><p>don’t change version in running <code class="docutils literal notranslate"><span class="pre">experiments</span></code></p></li>
</ul>
<p>First things first: do you have a working <code class="docutils literal notranslate"><span class="pre">PsychoPy</span></code> installation?</p>
<p>We can simply check that via starting an <code class="docutils literal notranslate"><span class="pre">ipython</span></code> session from our <code class="docutils literal notranslate"><span class="pre">terminal</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%</span><span class="k">bash</span>

ipython
</pre></div>
</div>
</div>
</div>
<p>and from within there then try <code class="docutils literal notranslate"><span class="pre">import</span></code>ing <code class="docutils literal notranslate"><span class="pre">PsychoPy</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">psychopy</span>
</pre></div>
</div>
</div>
</div>
<p>Which shouldn’t work for you folks, as we’ve opted to download the standalone installation. Instead you can <code class="docutils literal notranslate"><span class="pre">open</span></code> psychopy, navigate to the <code class="docutils literal notranslate"><span class="pre">coder</span></code> view, create a new file and try out the above <code class="docutils literal notranslate"><span class="pre">import</span></code> statement.</p>
</div>
<div class="section" id="the-general-idea">
<h3>The general idea<a class="headerlink" href="#the-general-idea" title="Permalink to this headline">¶</a></h3>
<p>If you don’t get an <code class="docutils literal notranslate"><span class="pre">import</span> <span class="pre">error</span></code> there, at least the basic <code class="docutils literal notranslate"><span class="pre">installation</span></code> should be ok!</p>
<p>Cool, we are now ready to actually do some <code class="docutils literal notranslate"><span class="pre">coding</span></code>! As said before we will do that in our <code class="docutils literal notranslate"><span class="pre">experiment.py</span></code> <code class="docutils literal notranslate"><span class="pre">script</span></code>. While the transition from <code class="docutils literal notranslate"><span class="pre">jupyter</span> <span class="pre">notebooks</span></code> to <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">scripts</span></code> might seem harsh at first, it’s actually straight-forward: the steps we conducted/<code class="docutils literal notranslate"><span class="pre">commands</span></code> we <code class="docutils literal notranslate"><span class="pre">run</span></code> in an incremental fashion will also be indicated/<code class="docutils literal notranslate"><span class="pre">run</span></code> in an incremental fashion here, just within one <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">script</span></code> line-by-line.</p>
<p>So, what’s the first thing we usually do? That’s right: <code class="docutils literal notranslate"><span class="pre">import</span></code>ing <code class="docutils literal notranslate"><span class="pre">modules</span></code> and <code class="docutils literal notranslate"><span class="pre">function</span></code>s we need. Comparably to <code class="docutils literal notranslate"><span class="pre">jupyter</span> <span class="pre">notebook</span></code>, we will do that at the beginning of our <code class="docutils literal notranslate"><span class="pre">script</span></code>.</p>
<p><em>Please note, that we will go through a realistic example of <code class="docutils literal notranslate"><span class="pre">coding</span></code> <code class="docutils literal notranslate"><span class="pre">experiments</span></code> in <code class="docutils literal notranslate"><span class="pre">python</span></code> and thus might not import all <code class="docutils literal notranslate"><span class="pre">modules</span></code>/<code class="docutils literal notranslate"><span class="pre">functions</span></code> we will actually need from the start. Thus, we will add them to the the beginning of our scripts as we go along.</em></p>
<p>However, we actually haven’t checked out what <code class="docutils literal notranslate"><span class="pre">modules</span></code>/<code class="docutils literal notranslate"><span class="pre">functions</span></code> <code class="docutils literal notranslate"><span class="pre">PsychoPy</span></code> has. Let’s do that first.</p>
<ul class="simple">
<li><p><a class="reference external" href="https://psychopy.org/api/core.html">psychopy.core</a>: various basic functions, including timing &amp; experiment termination</p></li>
<li><p><a class="reference external" href="https://psychopy.org/api/gui.html">psychopy.gui</a>: various basic functions, including timing &amp; experiment termination</p></li>
<li><p><a class="reference external" href="https://psychopy.org/api/event.html">psychopy.event</a>: handling of keyboard/mouse/other input from user</p></li>
<li><p><a class="reference external" href="https://psychopy.org/api/visual/index.html">psychopy.visual</a>/<a class="reference external" href="https://psychopy.org/api/sound/index.html">sound</a>: presentation of stimuli of various types (e.g. images, sounds, etc.)</p></li>
<li><p><a class="reference external" href="https://psychopy.org/api/data.html">psychopy.data</a>: handling of condition parameters, response registration, trial order, etc.</p></li>
<li><p>many more …: we unfortunately can’t check out due to time constraints</p></li>
</ul>
<p>Nice, looks like a decent collection of useful/feasible <code class="docutils literal notranslate"><span class="pre">modules</span></code>/<code class="docutils literal notranslate"><span class="pre">functions</span></code>. The question now is: which ones do we need to implement to <code class="docutils literal notranslate"><span class="pre">run</span></code> our <code class="docutils literal notranslate"><span class="pre">experiment</span></code>?</p>
<p>“What experiment are we talking about?” you might ask. Well…, let’s make up our minds on that.</p>
<p>Let’s assume we have gotten our hands on some data regarding favorite <code class="docutils literal notranslate"><span class="pre">artists</span></code>, <code class="docutils literal notranslate"><span class="pre">snacks</span></code> and <code class="docutils literal notranslate"><span class="pre">animals</span></code> from a group of fantastic students and now want to test how each respectively provided item is <code class="docutils literal notranslate"><span class="pre">perceived</span></code>/<code class="docutils literal notranslate"><span class="pre">evaluated</span></code> by our  sample: how would we do that?</p>
<img align="center" src="https://raw.githubusercontent.com/PeerHerholz/Python_for_Psychologists_Winter2021/master/lecture/static/experiment_outline.png" alt="logo" title="jupyter" width="800" height="300" /> 
<p>As you can see, we need all of them!</p>
</div>
<div class="section" id="input-via-dialog-boxes">
<h3>Input via dialog boxes<a class="headerlink" href="#input-via-dialog-boxes" title="Permalink to this headline">¶</a></h3>
<p>Many <code class="docutils literal notranslate"><span class="pre">experiments</span></code> start with a <code class="docutils literal notranslate"><span class="pre">GUI</span> <span class="pre">dialog</span> <span class="pre">box</span></code> that allow us to input certain information, for example <code class="docutils literal notranslate"><span class="pre">participant</span> <span class="pre">id</span></code>, <code class="docutils literal notranslate"><span class="pre">session</span></code>, <code class="docutils literal notranslate"><span class="pre">group</span></code>, <code class="docutils literal notranslate"><span class="pre">data</span> <span class="pre">storage</span> <span class="pre">path</span></code>, etc. . We can implement this crucial aspect via the <a class="reference external" href="https://psychopy.org/api/gui.html">psychopy.gui module</a>. Initially, we need to <code class="docutils literal notranslate"><span class="pre">import</span></code> it and thus need to start a new section in our <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">script</span></code> and after that, we can define the <code class="docutils literal notranslate"><span class="pre">GUI</span> <span class="pre">dialog</span> <span class="pre">box</span></code> we want to create via a <code class="docutils literal notranslate"><span class="pre">dictionary</span></code> with respective <code class="docutils literal notranslate"><span class="pre">key-value</span> <span class="pre">pairs</span></code>.</p>
<p><em>Please note: at this we will start populating our <code class="docutils literal notranslate"><span class="pre">experiment.py</span></code> <code class="docutils literal notranslate"><span class="pre">script</span></code>. Thus, you should copy paste the respective content of the <code class="docutils literal notranslate"><span class="pre">code</span> <span class="pre">cells</span></code> into your <code class="docutils literal notranslate"><span class="pre">experiment.py</span></code> <code class="docutils literal notranslate"><span class="pre">script</span></code> you opened in <code class="docutils literal notranslate"><span class="pre">VScode</span></code>. As we will go step-by-step, the <code class="docutils literal notranslate"><span class="pre">code</span></code>/<code class="docutils literal notranslate"><span class="pre">script</span></code> will get longer and longer.</em></p>
<p><em>Btw can you think of other uses such a dialog box may have for psychological research?</em></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#===============</span>
<span class="c1"># Import modules</span>
<span class="c1">#===============</span>

<span class="kn">from</span> <span class="nn">psychopy</span> <span class="kn">import</span> <span class="n">gui</span><span class="p">,</span> <span class="n">core</span> <span class="c1"># import psychopy modules/functions</span>

<span class="c1">#========================================</span>
<span class="c1"># Create GUI dialog box for user input</span>
<span class="c1">#========================================</span>

<span class="c1"># Get subject name, age, handedness and other information through a dialog box</span>
<span class="n">exp_info</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;participant&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="c1"># participant name as string</span>
            <span class="s1">&#39;age&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="c1"># age name as string</span>
            <span class="s1">&#39;left-handed&#39;</span><span class="p">:</span><span class="kc">False</span><span class="p">,</span> <span class="c1"># handedness as boolean</span>
            <span class="s1">&#39;like this course&#39;</span><span class="p">:(</span><span class="s1">&#39;yes&#39;</span><span class="p">,</span> <span class="s1">&#39;no&#39;</span><span class="p">)</span> <span class="c1"># course feedback as tuple</span>
            <span class="p">}</span>

<span class="c1"># define name of experiment</span>
<span class="n">exp_name</span> <span class="o">=</span> <span class="s1">&#39;pfp_2022&#39;</span> <span class="c1"># set experiment name</span>

<span class="c1"># create GUI dialog box from dictionary</span>
<span class="n">dlg</span> <span class="o">=</span> <span class="n">gui</span><span class="o">.</span><span class="n">DlgFromDict</span><span class="p">(</span><span class="n">dictionary</span><span class="o">=</span><span class="n">exp_info</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="n">exp_name</span><span class="p">)</span>

<span class="c1"># If &#39;Cancel&#39; is pressed, quit experiment</span>
<span class="k">if</span> <span class="n">dlg</span><span class="o">.</span><span class="n">OK</span> <span class="o">==</span> <span class="kc">False</span><span class="p">:</span>
    <span class="n">core</span><span class="o">.</span><span class="n">quit</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<p>That’s actually all we need to test our <code class="docutils literal notranslate"><span class="pre">GUI</span> <span class="pre">dialog</span> <span class="pre">box</span></code>. In order to do that, we need to <code class="docutils literal notranslate"><span class="pre">run</span></code>/<code class="docutils literal notranslate"><span class="pre">execute</span></code> our <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">script</span></code> called <code class="docutils literal notranslate"><span class="pre">experiment.py</span></code>.</p>
<p>Simply open your <code class="docutils literal notranslate"><span class="pre">psychopy</span></code> installation, navigate to the <code class="docutils literal notranslate"><span class="pre">coder</span> <span class="pre">view</span></code>, open the <code class="docutils literal notranslate"><span class="pre">experiment.py</span></code> file via <code class="docutils literal notranslate"><span class="pre">file</span> <span class="pre">-&gt;</span> <span class="pre">open</span> <span class="pre">file</span></code> and hit the <code class="docutils literal notranslate"><span class="pre">run</span></code> button (green arrow).</p>
<p><em>Usually this is achieved via typing <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">experiment.py</span></code> in the <code class="docutils literal notranslate"><span class="pre">VScode</span> <span class="pre">terminal</span></code> and pressing <code class="docutils literal notranslate"><span class="pre">enter</span></code> this will <code class="docutils literal notranslate"><span class="pre">run</span></code>/<code class="docutils literal notranslate"><span class="pre">execute</span></code> the <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">script</span></code> <code class="docutils literal notranslate"><span class="pre">experiment.py</span></code> via the <code class="docutils literal notranslate"><span class="pre">python</span></code> installed in our <code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">environment</span></code> called <code class="docutils literal notranslate"><span class="pre">psychopy</span></code>. Again, please don’t <code class="docutils literal notranslate"><span class="pre">run</span></code>/<code class="docutils literal notranslate"><span class="pre">execute</span></code> <code class="docutils literal notranslate"><span class="pre">code</span></code> in this <code class="docutils literal notranslate"><span class="pre">jupyter</span> <span class="pre">notebook</span></code>!</em></p>
<p><em>Note: You can also try out the <code class="docutils literal notranslate"><span class="pre">create_dialogue_box.py</span></code> script in the <code class="docutils literal notranslate"><span class="pre">/lecture/experiment/</span></code> folder, which does the same basic thing</em></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="n">experiment</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
</div>
</div>
<p>If everything works/is set correctly you should see a <code class="docutils literal notranslate"><span class="pre">GUI</span> <span class="pre">dialog</span> <span class="pre">box</span></code> appearing on your screen asking for the information we indicated in our <code class="docutils literal notranslate"><span class="pre">experiment.py</span></code> <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">script</span></code> (chances are the layout on your end looks a bit different than mine, that’s no biggie). After entering all requested information and clicking <code class="docutils literal notranslate"><span class="pre">ok</span></code> the <code class="docutils literal notranslate"><span class="pre">GUI</span> <span class="pre">dialog</span> <span class="pre">box</span></code> should close and no errors should appear.</p>
<p>E.g.
<img align="center" src="https://raw.githubusercontent.com/PeerHerholz/Python_for_Psychologists_Winter2021/master/lecture/static/gui_example.png" alt="logo" title="jupyter" width="350" height="200" /></p>
<p><strong>Data Handling</strong></p>
<p>As we want to log whatever info is collected in the experiment, the next aspect we should take care of is the <code class="docutils literal notranslate"><span class="pre">data</span> <span class="pre">handling</span></code>, i.e. defining a <code class="docutils literal notranslate"><span class="pre">data</span> <span class="pre">filename</span></code> and <code class="docutils literal notranslate"><span class="pre">path</span></code> where it should be saved.</p>
<p>We can make use of the <code class="docutils literal notranslate"><span class="pre">exp_info</span> <span class="pre">dictionary</span></code> right away and extract important information from there, for example, the <code class="docutils literal notranslate"><span class="pre">experiment</span></code> name and <code class="docutils literal notranslate"><span class="pre">participant</span> <span class="pre">ID</span></code>. Additionally, we will obtain the <code class="docutils literal notranslate"><span class="pre">date</span></code> and <code class="docutils literal notranslate"><span class="pre">time</span></code> via the <code class="docutils literal notranslate"><span class="pre">psychopy.core</span> <span class="pre">module</span></code>.</p>
<p>We will also create a unique <code class="docutils literal notranslate"><span class="pre">filename</span></code> for the resulting <code class="docutils literal notranslate"><span class="pre">data</span></code> and check if the set <code class="docutils literal notranslate"><span class="pre">data</span> <span class="pre">path</span></code> works out via the <code class="docutils literal notranslate"><span class="pre">os</span></code> <code class="docutils literal notranslate"><span class="pre">module</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#===============</span>
<span class="c1"># Import modules</span>
<span class="c1">#===============</span>

<span class="kn">from</span> <span class="nn">psychopy</span> <span class="kn">import</span> <span class="n">gui</span><span class="p">,</span> <span class="n">core</span> <span class="c1"># import psychopy modules/functions</span>
<span class="kn">import</span> <span class="nn">os</span> <span class="c1"># import os module</span>

<span class="c1">#========================================</span>
<span class="c1"># Create GUI dialog box for user input</span>
<span class="c1">#========================================</span>

<span class="c1"># Get subject name, age, handedness and other information through a dialog box</span>
<span class="n">exp_info</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;participant&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="c1"># participant name as string</span>
            <span class="s1">&#39;age&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="c1"># age name as string</span>
            <span class="s1">&#39;left-handed&#39;</span><span class="p">:</span><span class="kc">False</span><span class="p">,</span> <span class="c1"># handedness as boolean</span>
            <span class="s1">&#39;like this course&#39;</span><span class="p">:(</span><span class="s1">&#39;yes&#39;</span><span class="p">,</span> <span class="s1">&#39;no&#39;</span><span class="p">)</span> <span class="c1"># course feedback as tuple</span>
            <span class="p">}</span>

<span class="c1"># define name of experiment</span>
<span class="n">exp_name</span> <span class="o">=</span> <span class="s1">&#39;pfp_2022&#39;</span> <span class="c1"># set experiment name</span>

<span class="c1"># create GUI dialog box from dictionary</span>
<span class="n">dlg</span> <span class="o">=</span> <span class="n">gui</span><span class="o">.</span><span class="n">DlgFromDict</span><span class="p">(</span><span class="n">dictionary</span><span class="o">=</span><span class="n">exp_info</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="n">exp_name</span><span class="p">)</span>

<span class="c1"># If &#39;Cancel&#39; is pressed, quit experiment</span>
<span class="k">if</span> <span class="n">dlg</span><span class="o">.</span><span class="n">OK</span> <span class="o">==</span> <span class="kc">False</span><span class="p">:</span>
    <span class="n">core</span><span class="o">.</span><span class="n">quit</span><span class="p">()</span>

<span class="c1">#=================================================</span>
<span class="c1"># Data storage: basic information, filename &amp; path</span>
<span class="c1">#=================================================</span>

<span class="c1"># Get date and time</span>
<span class="n">exp_info</span><span class="p">[</span><span class="s1">&#39;date&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">getDateStr</span><span class="p">()</span> <span class="c1"># get date and time via data module</span>
<span class="n">exp_info</span><span class="p">[</span><span class="s1">&#39;exp_name&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">exp_name</span> <span class="c1"># add experiment name no dict</span>

<span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">data_path</span><span class="p">):</span>
    <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">data_path</span><span class="p">)</span>  <span class="c1"># create subject directory</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">data_path</span><span class="p">)</span>  <span class="c1"># print subject_directory to terminal</span>


<span class="c1"># Create a unique filename for the experiment data    </span>
<span class="n">data_fname</span> <span class="o">=</span> <span class="n">exp_info</span><span class="p">[</span><span class="s1">&#39;participant&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;_&#39;</span> <span class="o">+</span> <span class="n">exp_info</span><span class="p">[</span><span class="s1">&#39;date&#39;</span><span class="p">]</span> <span class="c1"># create initial file name from participant ID and date/time</span>
<span class="n">data_fname</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">data_path</span><span class="p">,</span> <span class="n">data_fname</span><span class="p">)</span> <span class="c1"># add path from GUI dialog box</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="presenting-instructions">
<h3>Presenting instructions<a class="headerlink" href="#presenting-instructions" title="Permalink to this headline">¶</a></h3>
<p>After having set some crucial backbones of our <code class="docutils literal notranslate"><span class="pre">experiment</span></code>, it’s time to actually start it. Quite often, <code class="docutils literal notranslate"><span class="pre">experiments</span></code> start with several messages of <code class="docutils literal notranslate"><span class="pre">instructions</span></code> that explain the <code class="docutils literal notranslate"><span class="pre">experiment</span></code> to the <code class="docutils literal notranslate"><span class="pre">participant</span></code>. Thus, we will add a few here as well, starting with a common <code class="docutils literal notranslate"><span class="pre">“welcome”</span> <span class="pre">text</span> <span class="pre">message</span></code>.</p>
<p>To display things in general but also text, the <a class="reference external" href="https://psychopy.org/api/visual/index.html">psychopy.visual module</a> is the way to go. What we need to do now is define a general <code class="docutils literal notranslate"><span class="pre">experiment</span> <span class="pre">window</span></code> to utilize during the entire <code class="docutils literal notranslate"><span class="pre">experiment</span></code> and a <code class="docutils literal notranslate"><span class="pre">text</span></code> to be displayed on it.</p>
<p>We can do the first via the function</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>  win = visual.Window()
</pre></div>
</div>
<p>Which takes some <code class="docutils literal notranslate"><span class="pre">keyword</span> <span class="pre">arguments</span></code>, such as the size (e.g. <code class="docutils literal notranslate"><span class="pre">size=(800,600)</span></code>) of the window we want to display, it’s backgroundcolor (e.g. <code class="docutils literal notranslate"><span class="pre">color='gray'</span></code>) as inputs. For a full-list of specifications check out the <a class="reference external" href="https://psychopy.org/api/visual/window.html#psychopy.visual.Window">visual.Windows() API</a></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#===============</span>
<span class="c1"># Import modules</span>
<span class="c1">#===============</span>

<span class="kn">from</span> <span class="nn">psychopy</span> <span class="kn">import</span> <span class="n">gui</span><span class="p">,</span> <span class="n">core</span> <span class="c1"># import psychopy modules/functions</span>
<span class="kn">import</span> <span class="nn">os</span> <span class="c1"># import os module</span>

<span class="c1">#========================================</span>
<span class="c1"># Create GUI dialog box for user input</span>
<span class="c1">#========================================</span>

<span class="c1"># Get subject name, age, handedness and other information through a dialog box</span>
<span class="n">exp_info</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;participant&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="c1"># participant name as string</span>
            <span class="s1">&#39;age&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="c1"># age name as string</span>
            <span class="s1">&#39;left-handed&#39;</span><span class="p">:</span><span class="kc">False</span><span class="p">,</span> <span class="c1"># handedness as boolean</span>
            <span class="s1">&#39;like this course&#39;</span><span class="p">:(</span><span class="s1">&#39;yes&#39;</span><span class="p">,</span> <span class="s1">&#39;no&#39;</span><span class="p">)</span> <span class="c1"># course feedback as tuple</span>
            <span class="p">}</span>

<span class="c1"># define name of experiment</span>
<span class="n">exp_name</span> <span class="o">=</span> <span class="s1">&#39;pfp_2022&#39;</span> <span class="c1"># set experiment name</span>

<span class="c1"># create GUI dialog box from dictionary</span>
<span class="n">dlg</span> <span class="o">=</span> <span class="n">gui</span><span class="o">.</span><span class="n">DlgFromDict</span><span class="p">(</span><span class="n">dictionary</span><span class="o">=</span><span class="n">exp_info</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="n">exp_name</span><span class="p">)</span>

<span class="c1"># If &#39;Cancel&#39; is pressed, quit experiment</span>
<span class="k">if</span> <span class="n">dlg</span><span class="o">.</span><span class="n">OK</span> <span class="o">==</span> <span class="kc">False</span><span class="p">:</span>
    <span class="n">core</span><span class="o">.</span><span class="n">quit</span><span class="p">()</span>

<span class="c1">#=================================================</span>
<span class="c1"># Data storage: basic information, filename &amp; path</span>
<span class="c1">#=================================================</span>

<span class="c1"># Get date and time</span>
<span class="n">exp_info</span><span class="p">[</span><span class="s1">&#39;date&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">getDateStr</span><span class="p">()</span> <span class="c1"># get date and time via data module</span>
<span class="n">exp_info</span><span class="p">[</span><span class="s1">&#39;exp_name&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">exp_name</span> <span class="c1"># add experiment name no dict</span>

<span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">data_path</span><span class="p">):</span>
    <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">data_path</span><span class="p">)</span>  <span class="c1"># create subject directory</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">data_path</span><span class="p">)</span>  <span class="c1"># print subject_directory to terminal</span>


<span class="c1"># Create a unique filename for the experiment data    </span>
<span class="n">data_fname</span> <span class="o">=</span> <span class="n">exp_info</span><span class="p">[</span><span class="s1">&#39;participant&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;_&#39;</span> <span class="o">+</span> <span class="n">exp_info</span><span class="p">[</span><span class="s1">&#39;date&#39;</span><span class="p">]</span> <span class="c1"># create initial file name from participant ID and date/time</span>
<span class="n">data_fname</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">data_path</span><span class="p">,</span> <span class="n">data_fname</span><span class="p">)</span> <span class="c1"># add path from GUI dialog box</span>

<span class="c1">#===============================</span>
<span class="c1"># Creation of window and messages</span>
<span class="c1">#===============================</span>

<span class="c1"># Open a window</span>
<span class="n">win</span> <span class="o">=</span> <span class="n">visual</span><span class="o">.</span><span class="n">Window</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="mi">800</span><span class="p">,</span><span class="mi">600</span><span class="p">),</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;gray&#39;</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="s1">&#39;pix&#39;</span><span class="p">,</span> <span class="n">fullscr</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="c1"># set size, background color, etc. of window</span>

<span class="c1"># Define experiment start text</span>
<span class="n">welcome_message</span> <span class="o">=</span> <span class="n">visual</span><span class="o">.</span><span class="n">TextStim</span><span class="p">(</span><span class="n">win</span><span class="p">,</span>
                                <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Welcome to the experiment. Please press the spacebar to continue.&quot;</span><span class="p">,</span>
                                <span class="n">color</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">40</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>As you see, we can create <code class="docutils literal notranslate"><span class="pre">messages</span></code> by using the function</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>visual.TextStim()
</pre></div>
</div>
<p>to which we provide as an <code class="docutils literal notranslate"><span class="pre">positional</span> <span class="pre">argument</span></code> our newly created window, the <code class="docutils literal notranslate"><span class="pre">text</span></code> we want to provide as a <code class="docutils literal notranslate"><span class="pre">string</span></code> and some further specifications for readability.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>welcome_message = visual.TextStim(win, text=&quot;Welcome to the experiment.&quot;)
</pre></div>
</div>
<p>Check-out the <a class="reference external" href="https://psychopy.org/api/visual/textstim.html#psychopy.visual.TextStim">visual.TextStim() API</a> for more ways to customize your <code class="docutils literal notranslate"><span class="pre">messages</span></code>.</p>
</div>
</div>
<div class="section" id="psychopy-working-principles">
<h2>PsychoPy working principles<a class="headerlink" href="#psychopy-working-principles" title="Permalink to this headline">¶</a></h2>
<p>Now we come across one of <code class="docutils literal notranslate"><span class="pre">PsychoPy</span></code>’s core working principles: we need a <code class="docutils literal notranslate"><span class="pre">general</span> <span class="pre">experiment</span> <span class="pre">window</span></code>, i.e. a place we can display/present something on.</p>
<p>You can define a variety of different <code class="docutils literal notranslate"><span class="pre">windows</span></code> based on different <code class="docutils literal notranslate"><span class="pre">screens</span></code>/<code class="docutils literal notranslate"><span class="pre">monitors</span></code> which should however be adapted to the <code class="docutils literal notranslate"><span class="pre">setup</span></code> and <code class="docutils literal notranslate"><span class="pre">experiment</span></code> at hand (e.g. <code class="docutils literal notranslate"><span class="pre">size</span></code>, <code class="docutils literal notranslate"><span class="pre">background</span> <span class="pre">color</span></code>, etc.). Basically all <code class="docutils literal notranslate"><span class="pre">experiments</span></code> you will set up will require you to define a <code class="docutils literal notranslate"><span class="pre">general</span> <span class="pre">experiment</span> <span class="pre">window</span></code> as without it no <code class="docutils literal notranslate"><span class="pre">visual</span> <span class="pre">stimuli</span></code> (e.g. <code class="docutils literal notranslate"><span class="pre">images</span></code>, <code class="docutils literal notranslate"><span class="pre">text</span></code>, <code class="docutils literal notranslate"><span class="pre">movies</span></code>, etc.) can be displayed/presented or how <code class="docutils literal notranslate"><span class="pre">PsychoPy</span></code> would say it: <code class="docutils literal notranslate"><span class="pre">drawn</span></code></p>
<p>Speaking of which: this is the next core working principle we are going to see and explore is the difference between <code class="docutils literal notranslate"><span class="pre">draw</span></code>ing something and showing it.</p>
<div class="section" id="drawing-flipping">
<h3><code class="docutils literal notranslate"><span class="pre">Draw</span></code>ing &amp; <code class="docutils literal notranslate"><span class="pre">flip</span></code>ping<a class="headerlink" href="#drawing-flipping" title="Permalink to this headline">¶</a></h3>
<p>In <code class="docutils literal notranslate"><span class="pre">PsychoPy</span></code> (and many other comparable software) there’s a big difference between <code class="docutils literal notranslate"><span class="pre">draw</span></code>ing and showing something.</p>
<p>While we need to <code class="docutils literal notranslate"><span class="pre">draw</span></code> something on/in a <code class="docutils literal notranslate"><span class="pre">window</span></code>, to actually <code class="docutils literal notranslate"><span class="pre">add</span></code> the <code class="docutils literal notranslate"><span class="pre">component</span></code> to our <code class="docutils literal notranslate"><span class="pre">window</span></code>, that alone won’t actually show it.</p>
<p>This is because <code class="docutils literal notranslate"><span class="pre">PsychoPy</span></code> internally uses <code class="docutils literal notranslate"><span class="pre">“two</span> <span class="pre">screens”</span></code> one <code class="docutils literal notranslate"><span class="pre">background</span></code> or <code class="docutils literal notranslate"><span class="pre">buffer</span></code> <code class="docutils literal notranslate"><span class="pre">screen</span></code> which is not seen (yet) and one <code class="docutils literal notranslate"><span class="pre">front</span> <span class="pre">screen</span></code> which is (currently) seen. When you <code class="docutils literal notranslate"><span class="pre">draw</span></code> something it’s always going to be <code class="docutils literal notranslate"><span class="pre">draw</span></code>n on the <code class="docutils literal notranslate"><span class="pre">background</span></code>/<code class="docutils literal notranslate"><span class="pre">buffer</span></code> <code class="docutils literal notranslate"><span class="pre">screen</span></code>, thus “invisible” and you need to <code class="docutils literal notranslate"><span class="pre">flip</span></code> it to the <code class="docutils literal notranslate"><span class="pre">front</span> <span class="pre">screen</span></code> to be “visible”.</p>
<img align="center" src="https://raw.githubusercontent.com/PeerHerholz/Python_for_Psychologists_Winter2021/master/lecture/static/draw_flip.png" alt="logo" title="jupyter" width="800" height="400" /> 
<p>Why does <code class="docutils literal notranslate"><span class="pre">PsychoPy</span></code> (and other comparable software) work like that? The idea/aim is always the same: increase performance and minimize delays (as addressed in the <span class="xref myst">slides</span>).</p>
<p><code class="docutils literal notranslate"><span class="pre">Draw</span></code>ing something might take a long time, depending on the stimulus at hand, but <code class="docutils literal notranslate"><span class="pre">flip</span></code>ping something already drawn from the <code class="docutils literal notranslate"><span class="pre">buffer</span></code> to the <code class="docutils literal notranslate"><span class="pre">front</span> <span class="pre">screen</span></code> is fast(er). It can thus ensure better and more precise timing. This can work comparably for <code class="docutils literal notranslate"><span class="pre">images</span></code>, <code class="docutils literal notranslate"><span class="pre">sounds</span></code>, <code class="docutils literal notranslate"><span class="pre">movies</span></code>, etc. where things are set/<code class="docutils literal notranslate"><span class="pre">draw</span></code>n/pre-loaded and presented exactly when needed.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#===============</span>
<span class="c1"># Import modules</span>
<span class="c1">#===============</span>

<span class="kn">from</span> <span class="nn">psychopy</span> <span class="kn">import</span> <span class="n">gui</span><span class="p">,</span> <span class="n">core</span><span class="p">,</span> <span class="n">visual</span> <span class="c1"># import psychopy modules/functions</span>
<span class="kn">import</span> <span class="nn">os</span> <span class="c1"># import os module</span>

<span class="c1">#========================================</span>
<span class="c1"># Create GUI dialog box for user input</span>
<span class="c1">#========================================</span>

<span class="c1"># Get subject name, age, handedness and other information through a dialog box</span>
<span class="n">exp_info</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;participant&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="c1"># participant name as string</span>
            <span class="s1">&#39;age&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="c1"># age name as string</span>
            <span class="s1">&#39;left-handed&#39;</span><span class="p">:</span><span class="kc">False</span><span class="p">,</span> <span class="c1"># handedness as boolean</span>
            <span class="s1">&#39;like this course&#39;</span><span class="p">:(</span><span class="s1">&#39;yes&#39;</span><span class="p">,</span> <span class="s1">&#39;no&#39;</span><span class="p">)</span> <span class="c1"># course feedback as tuple</span>
            <span class="p">}</span>

<span class="c1"># define name of experiment</span>
<span class="n">exp_name</span> <span class="o">=</span> <span class="s1">&#39;pfp_2022&#39;</span> <span class="c1"># set experiment name</span>

<span class="c1"># create GUI dialog box from dictionary</span>
<span class="n">dlg</span> <span class="o">=</span> <span class="n">gui</span><span class="o">.</span><span class="n">DlgFromDict</span><span class="p">(</span><span class="n">dictionary</span><span class="o">=</span><span class="n">exp_info</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="n">exp_name</span><span class="p">)</span>

<span class="c1"># If &#39;Cancel&#39; is pressed, quit experiment</span>
<span class="k">if</span> <span class="n">dlg</span><span class="o">.</span><span class="n">OK</span> <span class="o">==</span> <span class="kc">False</span><span class="p">:</span>
    <span class="n">core</span><span class="o">.</span><span class="n">quit</span><span class="p">()</span>

<span class="c1">#=================================================</span>
<span class="c1"># Data storage: basic information, filename &amp; path</span>
<span class="c1">#=================================================</span>

<span class="c1"># Get date and time</span>
<span class="n">exp_info</span><span class="p">[</span><span class="s1">&#39;date&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">getDateStr</span><span class="p">()</span> <span class="c1"># get date and time via data module</span>
<span class="n">exp_info</span><span class="p">[</span><span class="s1">&#39;exp_name&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">exp_name</span> <span class="c1"># add experiment name no dict</span>

<span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">data_path</span><span class="p">):</span>
    <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">data_path</span><span class="p">)</span>  <span class="c1"># create subject directory</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">data_path</span><span class="p">)</span>  <span class="c1"># print subject_directory to terminal</span>


<span class="c1"># Create a unique filename for the experiment data    </span>
<span class="n">data_fname</span> <span class="o">=</span> <span class="n">exp_info</span><span class="p">[</span><span class="s1">&#39;participant&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;_&#39;</span> <span class="o">+</span> <span class="n">exp_info</span><span class="p">[</span><span class="s1">&#39;date&#39;</span><span class="p">]</span> <span class="c1"># create initial file name from participant ID and date/time</span>
<span class="n">data_fname</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">data_path</span><span class="p">,</span> <span class="n">data_fname</span><span class="p">)</span> <span class="c1"># add path from GUI dialog box</span>

<span class="c1">#===============================</span>
<span class="c1"># Creation of window and messages</span>
<span class="c1">#===============================</span>

<span class="c1"># Open a window</span>
<span class="n">win</span> <span class="o">=</span> <span class="n">visual</span><span class="o">.</span><span class="n">Window</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="mi">800</span><span class="p">,</span><span class="mi">600</span><span class="p">),</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;gray&#39;</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="s1">&#39;pix&#39;</span><span class="p">,</span> <span class="n">fullscr</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="c1"># set size, background color, etc. of window</span>

<span class="c1"># Define experiment start text</span>
<span class="n">welcome_message</span> <span class="o">=</span> <span class="n">visual</span><span class="o">.</span><span class="n">TextStim</span><span class="p">(</span><span class="n">win</span><span class="p">,</span>
                                <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Welcome to the experiment. Please press the spacebar to continue.&quot;</span><span class="p">,</span>
                                <span class="n">color</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">40</span><span class="p">)</span>
<span class="c1">#=====================</span>
<span class="c1"># Start the experiment</span>
<span class="c1">#=====================</span>

<span class="c1"># display welcome message</span>
<span class="n">welcome_message</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span> <span class="c1"># draw welcome message to buffer screen</span>
<span class="n">win</span><span class="o">.</span><span class="n">flip</span><span class="p">()</span> <span class="c1"># flip it to the front screen</span>
</pre></div>
</div>
</div>
</div>
<p>As you might have noticed the <code class="docutils literal notranslate"><span class="pre">draw</span></code> function is applied to the <code class="docutils literal notranslate"><span class="pre">text_stimulus</span></code> to load it onto our <code class="docutils literal notranslate"><span class="pre">buffer</span> <span class="pre">screen</span></code>, while the <code class="docutils literal notranslate"><span class="pre">.flip</span></code> function is applied afterwards to our <code class="docutils literal notranslate"><span class="pre">window</span></code> instead.</p>
<p>Let’s give it a try via <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">experiment.py</span></code>. If everything works/is set correctly you should see the <code class="docutils literal notranslate"><span class="pre">GUI</span> <span class="pre">dialog</span> <span class="pre">box</span></code> again but this time after clicking <code class="docutils literal notranslate"><span class="pre">OK</span></code>, the <code class="docutils literal notranslate"><span class="pre">text</span></code> we defined as a welcome message should appear next.</p>
</br>
</div>
<div class="section" id="waiting-for-input">
<h3>Waiting for Input<a class="headerlink" href="#waiting-for-input" title="Permalink to this headline">¶</a></h3>
<p>However, the text only appears very briefly and in contrast to our <code class="docutils literal notranslate"><span class="pre">GUI</span> <span class="pre">dialog</span> <span class="pre">box</span></code> doesn’t wait for us to press anything in advance.</p>
<p>This is because we didn’t tell <code class="docutils literal notranslate"><span class="pre">PsychoPy</span></code> that we want to <code class="docutils literal notranslate"><span class="pre">wait</span></code> for a distinct <code class="docutils literal notranslate"><span class="pre">key</span> <span class="pre">press</span></code> before we advance further, we need the <a class="reference external" href="https://psychopy.org/api/event.html">psychopy.event module</a>.</p>
<p>Through its <code class="docutils literal notranslate"><span class="pre">.waitKeys()</span></code> <code class="docutils literal notranslate"><span class="pre">function</span></code> we can define that nothing should happen/we shouldn’t advancing unless a certain <code class="docutils literal notranslate"><span class="pre">key</span></code> is pressed. We can Specify the respective <code class="docutils literal notranslate"><span class="pre">keys</span></code> we want to allow as input, by providing them as <code class="docutils literal notranslate"><span class="pre">elements</span></code> of a <code class="docutils literal notranslate"><span class="pre">list</span></code> to the function.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>keys = event.waitKeys(keyList=[&#39;space&#39;, &#39;escape&#39;])
</pre></div>
</div>
<p>We also assign this function by convention to a variable, which would allow us to track the buttons participants have pressed and their reaction times.</p>
<p>While we are at it, let’s add a few more messages to our <code class="docutils literal notranslate"><span class="pre">experiment</span></code>. One will be presented right after the welcome message and explain very generally what will happen in the <code class="docutils literal notranslate"><span class="pre">experiment</span></code>. Another one will be presented at the end of the experiment and display a general “that’s it, thanks for taking part” message. The syntax for creating, <code class="docutils literal notranslate"><span class="pre">draw</span></code>ing and presenting these message is identical to the one we just explored, we only need to change the <code class="docutils literal notranslate"><span class="pre">text</span></code> (and assign them to new variables, of course).</p>
<p><em><strong>Note</strong>: Something you’ll also frequently encounter is the psychopy.core.wait() function which can be used to present stimuli or text for a certain period of time</em></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#===============</span>
<span class="c1"># Import modules</span>
<span class="c1">#===============</span>

<span class="kn">from</span> <span class="nn">psychopy</span> <span class="kn">import</span> <span class="n">gui</span><span class="p">,</span> <span class="n">core</span><span class="p">,</span> <span class="n">visual</span><span class="p">,</span> <span class="n">event</span> <span class="c1"># import psychopy modules/functions</span>
<span class="kn">import</span> <span class="nn">os</span> <span class="c1"># import os module</span>

<span class="c1">#========================================</span>
<span class="c1"># Create GUI dialog box for user input</span>
<span class="c1">#========================================</span>


<span class="c1"># Get subject name, age, handedness and other information through a dialog box</span>
<span class="n">exp_info</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;participant&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="c1"># participant name as string</span>
            <span class="s1">&#39;age&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="c1"># age name as string</span>
            <span class="s1">&#39;left-handed&#39;</span><span class="p">:</span><span class="kc">False</span><span class="p">,</span> <span class="c1"># handedness as boolean</span>
            <span class="s1">&#39;like this course&#39;</span><span class="p">:(</span><span class="s1">&#39;yes&#39;</span><span class="p">,</span> <span class="s1">&#39;no&#39;</span><span class="p">)</span> <span class="c1"># course feedback as tuple</span>
            <span class="p">}</span>

<span class="c1"># define name of experiment</span>
<span class="n">exp_name</span> <span class="o">=</span> <span class="s1">&#39;pfp_2022&#39;</span> <span class="c1"># set experiment name</span>

<span class="c1"># create GUI dialog box from dictionary</span>
<span class="n">dlg</span> <span class="o">=</span> <span class="n">gui</span><span class="o">.</span><span class="n">DlgFromDict</span><span class="p">(</span><span class="n">dictionary</span><span class="o">=</span><span class="n">exp_info</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="n">exp_name</span><span class="p">)</span>

<span class="c1"># If &#39;Cancel&#39; is pressed, quit experiment</span>
<span class="k">if</span> <span class="n">dlg</span><span class="o">.</span><span class="n">OK</span> <span class="o">==</span> <span class="kc">False</span><span class="p">:</span>
    <span class="n">core</span><span class="o">.</span><span class="n">quit</span><span class="p">()</span>

<span class="c1">#=================================================</span>
<span class="c1"># Data storage: basic information, filename &amp; path</span>
<span class="c1">#=================================================</span>

<span class="c1"># get current working directory for easier creation/saving of files</span>
<span class="n">cwd</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">()</span>

<span class="c1"># Get date and time</span>
<span class="n">exp_info</span><span class="p">[</span><span class="s1">&#39;date&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">getDateStr</span><span class="p">(</span><span class="nb">format</span><span class="o">=</span><span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">_%H_%M&quot;</span><span class="p">)</span> <span class="c1"># get date and time via data module</span>
<span class="n">exp_info</span><span class="p">[</span><span class="s1">&#39;exp_name&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">exp_name</span> <span class="c1"># add experiment name to info dict</span>

<span class="c1"># Check if set data path exists, if not create it</span>
<span class="n">data_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">cwd</span><span class="p">,</span> <span class="n">exp_info</span><span class="p">[</span><span class="s1">&#39;exp_name&#39;</span><span class="p">],</span> <span class="n">exp_info</span><span class="p">[</span><span class="s1">&#39;participant&#39;</span><span class="p">])</span>

<span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">data_path</span><span class="p">):</span>
    <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">data_path</span><span class="p">)</span>  <span class="c1"># create subject directory</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">data_path</span><span class="p">)</span>  <span class="c1"># print subject_directory in terminal</span>


<span class="c1"># Create a unique filename for the experiment data    </span>
<span class="n">data_fname</span> <span class="o">=</span> <span class="n">exp_info</span><span class="p">[</span><span class="s1">&#39;participant&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;_&#39;</span> <span class="o">+</span> <span class="n">exp_info</span><span class="p">[</span><span class="s1">&#39;date&#39;</span><span class="p">]</span> <span class="c1"># create initial file name from participant ID and date/time</span>
<span class="n">data_fname</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">data_path</span><span class="p">,</span> <span class="n">data_fname</span><span class="p">)</span> <span class="c1"># add path from GUI dialog box</span>


<span class="c1">#===============================</span>
<span class="c1"># Creation of window and messages</span>
<span class="c1">#===============================</span>

<span class="c1"># Open a window</span>
<span class="n">win</span> <span class="o">=</span> <span class="n">visual</span><span class="o">.</span><span class="n">Window</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="mi">800</span><span class="p">,</span><span class="mi">600</span><span class="p">),</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;gray&#39;</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="s1">&#39;pix&#39;</span><span class="p">,</span> <span class="n">fullscr</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="c1"># set size, background color, etc. of window</span>

<span class="c1"># Define experiment start text</span>
<span class="n">welcome_message</span> <span class="o">=</span> <span class="n">visual</span><span class="o">.</span><span class="n">TextStim</span><span class="p">(</span><span class="n">win</span><span class="p">,</span>
                                <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Welcome to the experiment. Please press spacebar to continue.&quot;</span><span class="p">,</span>
                                <span class="n">color</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">40</span><span class="p">)</span>


<span class="c1"># Define trial start text</span>
<span class="n">start_message</span> <span class="o">=</span> <span class="n">visual</span><span class="o">.</span><span class="n">TextStim</span><span class="p">(</span><span class="n">win</span><span class="p">,</span>
                                <span class="n">text</span><span class="o">=</span><span class="s2">&quot;In this experiment you will rate different musical artists, snacks and animals on a scale from 1 to 7. Please press the spacebar to start.&quot;</span><span class="p">,</span>
                                <span class="n">color</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">40</span><span class="p">)</span>

<span class="c1"># Define experiment end text</span>
<span class="n">end_message</span> <span class="o">=</span> <span class="n">visual</span><span class="o">.</span><span class="n">TextStim</span><span class="p">(</span><span class="n">win</span><span class="p">,</span>
                                <span class="n">text</span><span class="o">=</span><span class="s2">&quot;You have reached the end of the experiment, thanks for participating.&quot;</span><span class="p">,</span>
                                <span class="n">color</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">40</span><span class="p">)</span>



<span class="c1">#=====================</span>
<span class="c1"># Start the experiment</span>
<span class="c1">#=====================</span>

<span class="c1"># display welcome message</span>
<span class="n">welcome_message</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span> <span class="c1"># draw welcome message to buffer screen</span>
<span class="n">win</span><span class="o">.</span><span class="n">flip</span><span class="p">()</span> <span class="c1"># flip it to the front screen</span>
<span class="n">keys</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">waitKeys</span><span class="p">(</span><span class="n">keyList</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;space&#39;</span><span class="p">,</span> <span class="s1">&#39;escape&#39;</span><span class="p">])</span> <span class="c1"># wait for spacebar key press before advancing or quit when escape is pressed </span>

<span class="c1"># display start message</span>
<span class="n">start_message</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span> <span class="c1"># draw start message to buffer screen</span>
<span class="n">win</span><span class="o">.</span><span class="n">flip</span><span class="p">()</span> <span class="c1"># flip it to the front screen</span>
<span class="n">keys</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">waitKeys</span><span class="p">(</span><span class="n">keyList</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;space&#39;</span><span class="p">,</span> <span class="s1">&#39;escape&#39;</span><span class="p">])</span> <span class="c1"># wait for spacebar key press before advancing or quit when escape is pressed</span>

<span class="c1">#======================</span>
<span class="c1"># End of the experiment</span>
<span class="c1">#======================</span>

<span class="c1"># Display end message</span>
<span class="n">end_message</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span> <span class="c1"># draw end message to buffer screen</span>
<span class="n">win</span><span class="o">.</span><span class="n">flip</span><span class="p">()</span> <span class="c1"># flip it to the front screen</span>
<span class="n">keys</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">waitKeys</span><span class="p">(</span><span class="n">keyList</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;space&#39;</span><span class="p">,</span> <span class="s1">&#39;escape&#39;</span><span class="p">])</span> <span class="c1"># wait for spacebar key press before advancing or quit when escape is pressed</span>

<span class="c1">#print(&#39;Experiment ended&#39; + data.getDateStr(format=&quot;%Y-%m-%d_%H_M&quot;))</span>
</pre></div>
</div>
</div>
</div>
</br>
<p>Let’s give it a try via <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">experiment.py</span></code>. If everything works/is set correctly you should see the <code class="docutils literal notranslate"><span class="pre">GUI</span> <span class="pre">dialog</span> <span class="pre">box</span></code> and after clicking <code class="docutils literal notranslate"><span class="pre">OK</span></code>, the <code class="docutils literal notranslate"><span class="pre">text</span></code> we defined as a welcome message should appear next, followed by the start message and finally the end message. In all cases, the <code class="docutils literal notranslate"><span class="pre">experiment</span></code> should only advance if you press <code class="docutils literal notranslate"><span class="pre">spacebar</span></code> or quit when you press <code class="docutils literal notranslate"><span class="pre">escape</span></code>.</p>
</br>
<p>Having this rough frame of our <code class="docutils literal notranslate"><span class="pre">experiment</span></code>, it’s actually time to add the <code class="docutils literal notranslate"><span class="pre">experiment</span></code> itself: the <code class="docutils literal notranslate"><span class="pre">evaluation</span></code> of our <code class="docutils literal notranslate"><span class="pre">artists</span></code>, <code class="docutils literal notranslate"><span class="pre">snacks</span></code> and <code class="docutils literal notranslate"><span class="pre">animals</span></code>.</p>
</div>
<div class="section" id="trials">
<h3><code class="docutils literal notranslate"><span class="pre">trials</span></code><a class="headerlink" href="#trials" title="Permalink to this headline">¶</a></h3>
<p>Quick reminder: our <code class="docutils literal notranslate"><span class="pre">experiment</span></code> should collect responses from <code class="docutils literal notranslate"><span class="pre">participants</span></code> regarding our <code class="docutils literal notranslate"><span class="pre">list</span></code>s of <code class="docutils literal notranslate"><span class="pre">artists</span></code>, <code class="docutils literal notranslate"><span class="pre">snacks</span></code> and <code class="docutils literal notranslate"><span class="pre">animals</span></code>, specifically their respective <code class="docutils literal notranslate"><span class="pre">rating</span></code>. Thus we need to add/implement two aspects in our <code class="docutils literal notranslate"><span class="pre">experiment</span></code>: the <strong>presentation of stimuli</strong> and their <strong>rating</strong>/</p>
<p>Starting with the <code class="docutils literal notranslate"><span class="pre">presentation</span> <span class="pre">of</span> <span class="pre">stimuli</span></code>, we will keep it simple for now and present them via <code class="docutils literal notranslate"><span class="pre">text</span></code>. However, any ideas how we could begin working on this? That’s right: we need to define <code class="docutils literal notranslate"><span class="pre">list</span></code>s with our stimuli!</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>artists = [‘Dvne’, ‘Mac Miller’, ‘Taylor Swift’, …]
</pre></div>
</div>
<p>We can already think about the next step:</p>
<p>Quite often <code class="docutils literal notranslate"><span class="pre">experiments</span></code> <code class="docutils literal notranslate"><span class="pre">shuffle</span></code> the order of <code class="docutils literal notranslate"><span class="pre">stimuli</span></code> across participants to avoid sequence/order effects.</p>
<p>We will do the same and implement that via the <a class="reference external" href="https://numpy.org/doc/stable/reference/random/index.html">numpy.random module</a>, specifically its <a class="reference external" href="https://numpy.org/doc/stable/reference/random/generated/numpy.random.shuffle.html">.shuffle()</a> <code class="docutils literal notranslate"><span class="pre">function</span></code> which will allow us to randomly <code class="docutils literal notranslate"><span class="pre">shuffle</span></code> our previously created <code class="docutils literal notranslate"><span class="pre">list</span></code>.</p>
<p><em><strong>Caution</strong>: This will shuffle your list <code class="docutils literal notranslate"><span class="pre">in</span> <span class="pre">place</span></code>, i.e make a copy of it beforehand, if you value the initial order.</em></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">rnd</span><span class="o">.</span><span class="n">shuffle</span><span class="p">(</span><span class="n">artists</span><span class="p">)</span>
</pre></div>
</div>
<p>would then result in something like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>print(artists)
[‘Mac Miller’, ‘Dvne’, ‘Taylor Swift’,  …]
</pre></div>
</div>
</br>
<blockquote>
<div><p>After that we could bring our <code class="docutils literal notranslate"><span class="pre">shuffle</span></code>d <code class="docutils literal notranslate"><span class="pre">stimuli</span> <span class="pre">list</span></code> into the format required by <code class="docutils literal notranslate"><span class="pre">PsychoPy</span></code>. Specifically, this refers to the definition of <code class="docutils literal notranslate"><span class="pre">experiment</span> <span class="pre">trials</span></code>, i.e. <code class="docutils literal notranslate"><span class="pre">trials</span></code> that will be presented during the <code class="docutils literal notranslate"><span class="pre">experiment</span></code>, including their properties (e.g. <code class="docutils literal notranslate"><span class="pre">content</span></code>, <code class="docutils literal notranslate"><span class="pre">order</span></code>, <code class="docutils literal notranslate"><span class="pre">repetition</span></code>, etc.). In <code class="docutils literal notranslate"><span class="pre">PsychoPy</span></code> this is achieved via the <a class="reference external" href="https://psychopy.org/api/data.html#psychopy.data.TrialHandler">data.TrialHandler()</a> <code class="docutils literal notranslate"><span class="pre">function</span></code> for which we need to convert our <code class="docutils literal notranslate"><span class="pre">shuffle</span></code>d <code class="docutils literal notranslate"><span class="pre">stimuli</span> <span class="pre">list</span></code> into a <code class="docutils literal notranslate"><span class="pre">list</span></code> of <code class="docutils literal notranslate"><span class="pre">dictionaries</span></code> of the form <code class="docutils literal notranslate"><span class="pre">“stimulus”:</span> <span class="pre">value</span></code>.</p>
</div></blockquote>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
</div></blockquote>
<p>stim_order = []</p>
<blockquote>
<div><p>for stim in movies:
stim_order.append({‘stimulus’: stim})</p>
</div></blockquote>
<blockquote>
<div><p>stim_order</p>
</div></blockquote>
<blockquote>
<div><p>[{‘stimulus’:‘Interstellar’},
{‘stimulus’:‘Love Actually’},
{‘stimulus’:‘Forrest Gump’},…]</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
</div></blockquote>
<blockquote>
<div><p>The result is then provided as <code class="docutils literal notranslate"><span class="pre">input</span></code> for the <a class="reference external" href="https://psychopy.org/api/data.html#psychopy.data.TrialHandler">data.TrialHandler()</a> <code class="docutils literal notranslate"><span class="pre">function</span></code>.</p>
</div></blockquote>
<blockquote>
<div><p>With that we can simply <code class="docutils literal notranslate"><span class="pre">loop</span></code> over the <code class="docutils literal notranslate"><span class="pre">trials</span></code> in the <code class="docutils literal notranslate"><span class="pre">trials</span> <span class="pre">object</span></code> and during each <code class="docutils literal notranslate"><span class="pre">iteration</span></code> <code class="docutils literal notranslate"><span class="pre">draw</span></code> and <code class="docutils literal notranslate"><span class="pre">flip</span></code> the respective <code class="docutils literal notranslate"><span class="pre">value</span></code> of the <code class="docutils literal notranslate"><span class="pre">dictionary</span> <span class="pre">key</span></code> <code class="docutils literal notranslate"><span class="pre">“stimulus”</span></code> to present the stimuli of our <code class="docutils literal notranslate"><span class="pre">list</span></code> “movies” one-by-one after one another.</p>
</div></blockquote>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
</div></blockquote>
<p>for trial in trials:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span># display/draw respective stimulus within each iteration, notice how the stimulus is set &quot;on the fly&quot;
visual.TextStim(win, text=trial[&#39;stimulus&#39;], bold=True, pos=[0, 30], height=40).draw()
</pre></div>
</div>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
</div></blockquote>
<p>But rebels that we are, we’re not going to do all that. Our <code class="docutils literal notranslate"><span class="pre">stimuli</span></code> are already contained in a <code class="docutils literal notranslate"><span class="pre">list</span></code> so Python makes it easy for us to iteratively present each <code class="docutils literal notranslate"><span class="pre">stimulus</span></code>.</p>
<p>Enter the <code class="docutils literal notranslate"><span class="pre">for</span> <span class="pre">loop</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">artist</span> <span class="ow">in</span> <span class="n">artists</span><span class="p">:</span>

    <span class="n">visual</span><span class="o">.</span><span class="n">TextStim</span><span class="p">(</span><span class="n">win</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="n">artist</span><span class="p">,</span> <span class="n">bold</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">pos</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">30</span><span class="p">],</span> <span class="n">height</span><span class="o">=</span><span class="mi">40</span><span class="p">)</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>

</pre></div>
</div>
<p>Notice, that we are just providing our <code class="docutils literal notranslate"><span class="pre">element</span></code>, i.e. the <code class="docutils literal notranslate"><span class="pre">artist</span> <span class="pre">variable</span></code> as the <code class="docutils literal notranslate"><span class="pre">text</span> <span class="pre">keyword</span> <span class="pre">argument</span></code> for the <code class="docutils literal notranslate"><span class="pre">TextStim</span></code> function.</p>
<p>Additionally, we want to display the question <code class="docutils literal notranslate"><span class="pre">“How</span> <span class="pre">much</span> <span class="pre">do</span> <span class="pre">you</span> <span class="pre">like</span> <span class="pre">the</span> <span class="pre">following?”</span></code> above the respective stimulus to remind participant about the task.</p>
<p>Within each <code class="docutils literal notranslate"><span class="pre">iteration</span></code> of our <code class="docutils literal notranslate"><span class="pre">for-loop</span></code> we will also allow participants to <code class="docutils literal notranslate"><span class="pre">quit</span></code> the <code class="docutils literal notranslate"><span class="pre">experiment</span></code> by pressing <code class="docutils literal notranslate"><span class="pre">“escape”</span></code> via the <code class="docutils literal notranslate"><span class="pre">event.getKeys()</span></code> <code class="docutils literal notranslate"><span class="pre">function</span></code> as we don’t want to wait for a <code class="docutils literal notranslate"><span class="pre">key</span></code> to be <code class="docutils literal notranslate"><span class="pre">pressed</span></code> but want to do something whenever a certain <code class="docutils literal notranslate"><span class="pre">key</span></code> is <code class="docutils literal notranslate"><span class="pre">pressed</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#===============</span>
<span class="c1"># Import modules</span>
<span class="c1">#===============</span>

<span class="kn">from</span> <span class="nn">psychopy</span> <span class="kn">import</span> <span class="n">gui</span><span class="p">,</span> <span class="n">core</span><span class="p">,</span> <span class="n">visual</span><span class="p">,</span> <span class="n">event</span><span class="p">,</span> <span class="n">data</span> <span class="c1"># import psychopy modules/functions</span>
<span class="kn">import</span> <span class="nn">os</span> <span class="c1"># import os module</span>
<span class="kn">import</span> <span class="nn">numpy.random</span> <span class="k">as</span> <span class="nn">rnd</span> <span class="c1"># import random module from numpy</span>

<span class="c1">#========================================</span>
<span class="c1"># Create GUI dialog box for user input</span>
<span class="c1">#========================================</span>

<span class="c1"># Get subject name, age, handedness and other information through a dialog box</span>
<span class="n">exp_info</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;participant&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="c1"># participant name as string</span>
            <span class="s1">&#39;age&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="c1"># age name as string</span>
            <span class="s1">&#39;left-handed&#39;</span><span class="p">:</span><span class="kc">False</span><span class="p">,</span> <span class="c1"># handedness as boolean</span>
            <span class="s1">&#39;like this course&#39;</span><span class="p">:(</span><span class="s1">&#39;yes&#39;</span><span class="p">,</span> <span class="s1">&#39;no&#39;</span><span class="p">)</span> <span class="c1"># course feedback as tuple</span>
            <span class="p">}</span>

<span class="c1"># define name of experiment</span>
<span class="n">exp_name</span> <span class="o">=</span> <span class="s1">&#39;pfp_2022&#39;</span> <span class="c1"># set experiment name</span>

<span class="c1"># create GUI dialog box from dictionary</span>
<span class="n">dlg</span> <span class="o">=</span> <span class="n">gui</span><span class="o">.</span><span class="n">DlgFromDict</span><span class="p">(</span><span class="n">dictionary</span><span class="o">=</span><span class="n">exp_info</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="n">exp_name</span><span class="p">)</span>

<span class="c1"># If &#39;Cancel&#39; is pressed, quit experiment</span>
<span class="k">if</span> <span class="n">dlg</span><span class="o">.</span><span class="n">OK</span> <span class="o">==</span> <span class="kc">False</span><span class="p">:</span>
    <span class="n">core</span><span class="o">.</span><span class="n">quit</span><span class="p">()</span>

<span class="c1">#=================================================</span>
<span class="c1"># Data storage: basic information, filename &amp; path</span>
<span class="c1">#=================================================</span>

<span class="c1"># get current working directory for easier creation/saving of files</span>
<span class="n">cwd</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">()</span>

<span class="c1"># Get date and time</span>
<span class="n">exp_info</span><span class="p">[</span><span class="s1">&#39;date&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">getDateStr</span><span class="p">(</span><span class="nb">format</span><span class="o">=</span><span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">_%H_%M&quot;</span><span class="p">)</span> <span class="c1"># get date and time via data module</span>
<span class="n">exp_info</span><span class="p">[</span><span class="s1">&#39;exp_name&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">exp_name</span> <span class="c1"># add experiment name to info dict</span>

<span class="c1"># Check if set data path exists, if not create it</span>
<span class="n">data_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">cwd</span><span class="p">,</span> <span class="n">exp_info</span><span class="p">[</span><span class="s1">&#39;exp_name&#39;</span><span class="p">],</span> <span class="n">exp_info</span><span class="p">[</span><span class="s1">&#39;participant&#39;</span><span class="p">])</span>

<span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">data_path</span><span class="p">):</span>
    <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">data_path</span><span class="p">)</span>  <span class="c1"># create subject directory</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">data_path</span><span class="p">)</span>  <span class="c1"># print subject_directory in terminal</span>


<span class="c1"># Create a unique filename for the experiment data    </span>
<span class="n">data_fname</span> <span class="o">=</span> <span class="n">exp_info</span><span class="p">[</span><span class="s1">&#39;participant&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;_&#39;</span> <span class="o">+</span> <span class="n">exp_info</span><span class="p">[</span><span class="s1">&#39;date&#39;</span><span class="p">]</span> <span class="c1"># create initial file name from participant ID and date/time</span>
<span class="n">data_fname</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">data_path</span><span class="p">,</span> <span class="n">data_fname</span><span class="p">)</span> <span class="c1"># add path from GUI dialog box</span>

<span class="c1">#===============================</span>
<span class="c1"># Creation of window and messages</span>
<span class="c1">#===============================</span>

<span class="c1"># Open a window</span>
<span class="n">win</span> <span class="o">=</span> <span class="n">visual</span><span class="o">.</span><span class="n">Window</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="mi">800</span><span class="p">,</span><span class="mi">600</span><span class="p">),</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;gray&#39;</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="s1">&#39;pix&#39;</span><span class="p">,</span> <span class="n">fullscr</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="c1"># set size, background color, etc. of window</span>

<span class="c1"># Define experiment start text</span>
<span class="n">welcome_message</span> <span class="o">=</span> <span class="n">visual</span><span class="o">.</span><span class="n">TextStim</span><span class="p">(</span><span class="n">win</span><span class="p">,</span>
                                <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Welcome to the experiment. Please press spacebar to continue.&quot;</span><span class="p">,</span>
                                <span class="n">color</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">40</span><span class="p">)</span>


<span class="c1"># Define trial start text</span>
<span class="n">start_message</span> <span class="o">=</span> <span class="n">visual</span><span class="o">.</span><span class="n">TextStim</span><span class="p">(</span><span class="n">win</span><span class="p">,</span>
                                <span class="n">text</span><span class="o">=</span><span class="s2">&quot;In this experiment you will rate different musical artists, snacks and animals on a scale from 1 to 7. Please press the spacebar to start.&quot;</span><span class="p">,</span>
                                <span class="n">color</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">40</span><span class="p">)</span>

<span class="c1"># Define experiment end text</span>
<span class="n">end_message</span> <span class="o">=</span> <span class="n">visual</span><span class="o">.</span><span class="n">TextStim</span><span class="p">(</span><span class="n">win</span><span class="p">,</span>
                                <span class="n">text</span><span class="o">=</span><span class="s2">&quot;You have reached the end of the experiment, thanks for participating.&quot;</span><span class="p">,</span>
                                <span class="n">color</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">40</span><span class="p">)</span>


<span class="c1">#=====================</span>
<span class="c1"># Start the experiment</span>
<span class="c1">#=====================</span>

<span class="c1"># display welcome message</span>
<span class="n">welcome_message</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span> <span class="c1"># draw welcome message to buffer screen</span>
<span class="n">win</span><span class="o">.</span><span class="n">flip</span><span class="p">()</span> <span class="c1"># flip it to the front screen</span>
<span class="n">keys</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">waitKeys</span><span class="p">(</span><span class="n">keyList</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;space&#39;</span><span class="p">,</span> <span class="s1">&#39;escape&#39;</span><span class="p">])</span> <span class="c1"># wait for spacebar key press before advancing or quit when escape is pressed </span>

<span class="c1"># display start message</span>
<span class="n">start_message</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span> <span class="c1"># draw start message to buffer screen</span>
<span class="n">win</span><span class="o">.</span><span class="n">flip</span><span class="p">()</span> <span class="c1"># flip it to the front screen</span>
<span class="n">keys</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">waitKeys</span><span class="p">(</span><span class="n">keyList</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;space&#39;</span><span class="p">,</span> <span class="s1">&#39;escape&#39;</span><span class="p">])</span> <span class="c1"># wait for spacebar key press before advancing or quit when escape is pressed</span>

<span class="c1">#==========================</span>
<span class="c1"># Define the trial sequence</span>
<span class="c1">#==========================</span>

<span class="c1"># Define a list of trials with their properties:</span>

<span class="c1"># define stimuli to be presented</span>
<span class="n">artists</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s1">&#39;Queen Adreena&#39;</span><span class="p">,</span> <span class="s1">&#39;Mac Miller&#39;</span><span class="p">,</span> <span class="s1">&#39;Nirvana&#39;</span><span class="p">,</span> <span class="s1">&#39;Álvaro Soler&#39;</span><span class="p">,</span> <span class="s1">&#39;Kanye West&#39;</span><span class="p">,</span> <span class="s1">&#39;Taylor Swift&#39;</span><span class="p">,</span>
    <span class="s1">&#39;BTS&#39;</span><span class="p">,</span> <span class="s1">&#39;SYML&#39;</span><span class="p">,</span> <span class="s1">&#39;Ed Sheeran&#39;</span><span class="p">,</span> <span class="s1">&#39;Betterov&#39;</span><span class="p">,</span> <span class="s1">&#39;Mark Medlock&#39;</span><span class="p">,</span>
    <span class="s1">&#39;Drake&#39;</span><span class="p">,</span> <span class="s1">&#39;NF&#39;</span><span class="p">,</span> <span class="s1">&#39;Lauv&#39;</span><span class="p">,</span> <span class="s1">&#39;Arctic Monkeys&#39;</span><span class="p">,</span> <span class="s1">&#39;Alfa Mist&#39;</span><span class="p">,</span> <span class="s1">&#39;Nepumuk&#39;</span><span class="p">,</span>
    <span class="s1">&#39;Reezy&#39;</span><span class="p">,</span> <span class="s1">&#39;Cat Burns&#39;</span><span class="p">,</span> <span class="s1">&#39;Aurora&#39;</span><span class="p">,</span> <span class="s1">&#39;Godspeed You! Black Emperor&#39;</span>
<span class="p">]</span>

<span class="c1"># randomize order of presented stimuli</span>
<span class="n">rnd</span><span class="o">.</span><span class="n">shuffle</span><span class="p">(</span><span class="n">artists</span><span class="p">)</span>

<span class="c1">#=====================</span>
<span class="c1"># Start the experiment</span>
<span class="c1">#=====================</span>

<span class="c1"># display welcome message</span>
<span class="n">welcome_message</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span> <span class="c1"># draw welcome message to buffer screen</span>
<span class="n">win</span><span class="o">.</span><span class="n">flip</span><span class="p">()</span> <span class="c1"># flip it to the front screen</span>
<span class="n">keys</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">waitKeys</span><span class="p">(</span><span class="n">keyList</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;space&#39;</span><span class="p">,</span> <span class="s1">&#39;escape&#39;</span><span class="p">])</span> <span class="c1"># wait for spacebar key press before advancing or quit when escape is pressed </span>

<span class="c1"># display start message</span>
<span class="n">start_message</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span> <span class="c1"># draw start message to buffer screen</span>
<span class="n">win</span><span class="o">.</span><span class="n">flip</span><span class="p">()</span> <span class="c1"># flip it to the front screen</span>
<span class="n">keys</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">waitKeys</span><span class="p">(</span><span class="n">keyList</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;space&#39;</span><span class="p">,</span> <span class="s1">&#39;escape&#39;</span><span class="p">])</span> <span class="c1"># wait for spacebar key press before advancing or quit when escape is pressed </span>


<span class="c1"># Run through the trials, stimulus by stimulus</span>
<span class="k">for</span> <span class="n">artist</span> <span class="ow">in</span> <span class="n">artists</span><span class="p">:</span>

    <span class="c1"># display/draw task question to remind participants</span>
    <span class="n">visual</span><span class="o">.</span><span class="n">TextStim</span><span class="p">(</span><span class="n">win</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s1">&#39;How much do you like the following?&#39;</span><span class="p">,</span> <span class="n">pos</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">90</span><span class="p">],</span> <span class="n">italic</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>
    <span class="c1"># display/draw respective stimulus within each iteration, notice how the stimulus is set &quot;on the fly&quot;</span>
    <span class="n">visual</span><span class="o">.</span><span class="n">TextStim</span><span class="p">(</span><span class="n">win</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="n">artist</span><span class="p">,</span> <span class="n">bold</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">pos</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">30</span><span class="p">],</span> <span class="n">height</span><span class="o">=</span><span class="mi">40</span><span class="p">)</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>
    <span class="n">win</span><span class="o">.</span><span class="n">flip</span><span class="p">()</span>

    <span class="n">core</span><span class="o">.</span><span class="n">wait</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span>  <span class="c1"># specify that psychopy should wait for .5 secs, so people can read the stimulus</span>
    
    <span class="c1"># if participants press `escape`, stop the experiment</span>
    <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">getKeys</span><span class="p">([</span><span class="s1">&#39;escape&#39;</span><span class="p">]):</span>
        <span class="n">core</span><span class="o">.</span><span class="n">quit</span><span class="p">()</span>   


<span class="c1">#======================</span>
<span class="c1"># End of the experiment</span>
<span class="c1">#======================</span>

<span class="c1"># Display end message</span>
<span class="n">end_message</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span> <span class="c1"># draw end message to buffer screen</span>
<span class="n">win</span><span class="o">.</span><span class="n">flip</span><span class="p">()</span> <span class="c1"># flip it to the front screen</span>
<span class="n">keys</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">waitKeys</span><span class="p">(</span><span class="n">keyList</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;space&#39;</span><span class="p">,</span> <span class="s1">&#39;escape&#39;</span><span class="p">])</span> <span class="c1"># wait for spacebar key press before advancing or quit when escape is pressed </span>
</pre></div>
</div>
</div>
</div>
</br>
<p>Let’s give it a try via <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">experiment.py</span></code>. If everything works/is set correctly you should see the <code class="docutils literal notranslate"><span class="pre">GUI</span> <span class="pre">dialog</span> <span class="pre">box</span></code> and after clicking <code class="docutils literal notranslate"><span class="pre">OK</span></code>, the <code class="docutils literal notranslate"><span class="pre">text</span></code> we defined as a welcome message should appear next, followed by the start message. Subsequently, you should see all of our <code class="docutils literal notranslate"><span class="pre">stimuli</span></code> one after another and the same question above them every <code class="docutils literal notranslate"><span class="pre">trial</span></code>. Finally, you should see the end message.</p>
</br>
<p>While this is already great, the same thing as during our earlier tests happened: the <code class="docutils literal notranslate"><span class="pre">text</span></code>, i.e. our <code class="docutils literal notranslate"><span class="pre">stimuli</span></code>, is only very briefly shown on screen (although the core.wait(0.5) statement slowed that down a bit).</p>
<p>As we didn’t specify that we want to collect <code class="docutils literal notranslate"><span class="pre">responses</span></code> the script is simply moving on to the next <code class="docutils literal notranslate"><span class="pre">stimulus</span></code>. We could now use the <code class="docutils literal notranslate"><span class="pre">event.waitKeys()</span></code> function as before and allow people to use the keys  1 - 7, but we instead will add a proper <code class="docutils literal notranslate"><span class="pre">ratingscale</span></code> for each loop-iteration to our <code class="docutils literal notranslate"><span class="pre">experiment</span></code>.</p>
</div>
</div>
<div class="section" id="input-output">
<h2>Input/output<a class="headerlink" href="#input-output" title="Permalink to this headline">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">PsychoPy</span></code> offers quite a bit of possible options to collect <code class="docutils literal notranslate"><span class="pre">responses</span></code>: simple yes/no questions, rating scales, visual analog scales, voice recordings, etc. and store outputs (<code class="docutils literal notranslate"><span class="pre">files</span></code>, different levels of detail, etc.).</p>
<div class="section" id="collecting-responses">
<h3>Collecting responses<a class="headerlink" href="#collecting-responses" title="Permalink to this headline">¶</a></h3>
<p>For the <code class="docutils literal notranslate"><span class="pre">experiment</span></code> at hand a simple <code class="docutils literal notranslate"><span class="pre">rating</span> <span class="pre">scale</span></code> yes, a Likert scale to make it Psychology, also recently know as “feeling integers”) should be sufficient. As with the other components we have explored so far, we need to implement/add this via two steps: <code class="docutils literal notranslate"><span class="pre">defining</span></code>/<code class="docutils literal notranslate"><span class="pre">creating</span></code> a <code class="docutils literal notranslate"><span class="pre">rating</span> <span class="pre">scale</span></code> and <code class="docutils literal notranslate"><span class="pre">draw</span></code>ing/presenting it.</p>
<p>We can easily define and tweak a rating scale via <code class="docutils literal notranslate"><span class="pre">PsychoPy</span></code>’s <a class="reference external" href="https://psychopy.org/api/visual/ratingscale.html#psychopy.visual.RatingScale">visual.RatingScale()</a> <code class="docutils literal notranslate"><span class="pre">function</span></code> which allows us to set the <code class="docutils literal notranslate"><span class="pre">range</span></code> of <code class="docutils literal notranslate"><span class="pre">values</span></code>, <code class="docutils literal notranslate"><span class="pre">labels</span></code>, <code class="docutils literal notranslate"><span class="pre">size</span></code>, etc..</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ratingScale</span> <span class="o">=</span> <span class="n">visual</span><span class="o">.</span><span class="n">RatingScale</span><span class="p">(</span><span class="n">win</span><span class="p">,</span> 
          <span class="n">scale</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>      
          <span class="n">low</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>           
          <span class="n">high</span> <span class="o">=</span> <span class="mi">7</span><span class="p">,</span>          
          <span class="n">showAccept</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> 
          <span class="n">markerStart</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>   
          <span class="n">labels</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;1 - Not at all&#39;</span><span class="p">,</span> <span class="s1">&#39;7 - A lot&#39;</span><span class="p">],</span> 
          <span class="n">pos</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">80</span><span class="p">])</span>
</pre></div>
</div>
<p>We then need to <code class="docutils literal notranslate"><span class="pre">draw</span></code> it and indicate that we want to <code class="docutils literal notranslate"><span class="pre">wait</span></code> until a <code class="docutils literal notranslate"><span class="pre">rating</span></code> was conducted before we advance to the next <code class="docutils literal notranslate"><span class="pre">trial</span></code>. Which is done by calling a <code class="docutils literal notranslate"><span class="pre">while</span> <span class="pre">loop</span></code> that “asks” wether a <code class="docutils literal notranslate"><span class="pre">response</span></code> has not been given yet. We don’t need to write this out, as the <code class="docutils literal notranslate"><span class="pre">ratingScale</span></code> object already includes this functionaliyt via <code class="docutils literal notranslate"><span class="pre">ratingScale.noResponse</span></code>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="k">while</span> <span class="n">ratingScale</span><span class="o">.</span><span class="n">noResponse</span><span class="p">:</span>
</pre></div>
</div>
<p>Additionally, we are going to display a small helpful message describing the <code class="docutils literal notranslate"><span class="pre">rating</span></code> and make sure that the <code class="docutils literal notranslate"><span class="pre">rating</span> <span class="pre">scale</span></code> is reset back to its <code class="docutils literal notranslate"><span class="pre">default</span> <span class="pre">status</span></code> before the next <code class="docutils literal notranslate"><span class="pre">trial</span></code> starts.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="n">ratingScale</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
</pre></div>
</div>
<p>Even though <code class="docutils literal notranslate"><span class="pre">participants</span></code> could already perform the <code class="docutils literal notranslate"><span class="pre">rating</span></code> of the <code class="docutils literal notranslate"><span class="pre">stimuli</span></code>, we don’t track and collect the respective <code class="docutils literal notranslate"><span class="pre">responses</span></code> yet. These need to be obtained from the <code class="docutils literal notranslate"><span class="pre">rating</span> <span class="pre">scale</span></code> before we <code class="docutils literal notranslate"><span class="pre">reset</span></code> before the next <code class="docutils literal notranslate"><span class="pre">trial</span></code>.</p>
<p>As indicated before <code class="docutils literal notranslate"><span class="pre">visual.RatingScale()</span></code> creates an <code class="docutils literal notranslate"><span class="pre">object</span></code>/<code class="docutils literal notranslate"><span class="pre">class</span></code>/<code class="docutils literal notranslate"><span class="pre">data</span> <span class="pre">type</span></code> with many inbuilt <code class="docutils literal notranslate"><span class="pre">functions</span></code>, this includes <code class="docutils literal notranslate"><span class="pre">.getRating()</span></code> and <code class="docutils literal notranslate"><span class="pre">.getRT()</span></code> to collect the provided <code class="docutils literal notranslate"><span class="pre">rating</span></code> and corresponding <code class="docutils literal notranslate"><span class="pre">response</span> <span class="pre">time</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="n">rating</span> <span class="o">=</span> <span class="n">ratingScale</span><span class="o">.</span><span class="n">getRating</span><span class="p">()</span>
    <span class="n">rt</span> <span class="o">=</span> <span class="n">ratingScale</span><span class="o">.</span><span class="n">getRT</span><span class="p">()</span>
</pre></div>
</div>
<p>We can then store both <code class="docutils literal notranslate"><span class="pre">values</span></code> per <code class="docutils literal notranslate"><span class="pre">trial</span></code> in the simplest way possible by first creating a <code class="docutils literal notranslate"><span class="pre">dictionary</span></code> and adding (<code class="docutils literal notranslate"><span class="pre">appending</span></code>) the values following each loop-iteration for each.</p>
<p>Importantly, this <code class="docutils literal notranslate"><span class="pre">dictionary</span></code> has to be created <code class="docutils literal notranslate"><span class="pre">outside</span></code> and <code class="docutils literal notranslate"><span class="pre">before</span></code> our <code class="docutils literal notranslate"><span class="pre">for-loop</span></code>, otherwise it would get overwritten in eacht iteration.
This would look something like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">data_info</span> <span class="o">=</span> <span class="p">{</span>
<span class="s1">&#39;stimulus&#39;</span><span class="p">:[],</span>
<span class="s1">&#39;rating_rt&#39;</span><span class="p">:[],</span>
<span class="s1">&#39;rating&#39;</span><span class="p">:[],</span>
<span class="s1">&#39;trial_num&#39;</span><span class="p">:[]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Next we consecutively <code class="docutils literal notranslate"><span class="pre">append</span></code> the collected values for each variable of interest to our <code class="docutils literal notranslate"><span class="pre">dictionary</span></code> by providing the respective <code class="docutils literal notranslate"><span class="pre">keys</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="c1"># write trial data into dict</span>
    <span class="n">data_info</span><span class="p">[</span><span class="s1">&#39;stimulus&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">artist</span><span class="p">)</span>
    <span class="n">data_info</span><span class="p">[</span><span class="s1">&#39;rating&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">rating</span><span class="p">)</span>
    <span class="n">data_info</span><span class="p">[</span><span class="s1">&#39;rating_rt&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">rt</span><span class="p">)</span>
    <span class="n">data_info</span><span class="p">[</span><span class="s1">&#39;trial_num&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">trial_counter</span><span class="p">)</span>

</pre></div>
</div>
<p><em>Note the level of indentation of these two code blocks</em></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#===============</span>
<span class="c1"># Import modules</span>
<span class="c1">#===============</span>

<span class="kn">from</span> <span class="nn">psychopy</span> <span class="kn">import</span> <span class="n">gui</span><span class="p">,</span> <span class="n">core</span><span class="p">,</span> <span class="n">visual</span><span class="p">,</span> <span class="n">event</span><span class="p">,</span> <span class="n">data</span> <span class="c1"># import psychopy modules/functions</span>
<span class="kn">import</span> <span class="nn">os</span> <span class="c1"># import os module</span>
<span class="kn">import</span> <span class="nn">numpy.random</span> <span class="k">as</span> <span class="nn">rnd</span> <span class="c1"># import random module from numpy</span>

<span class="c1">#========================================</span>
<span class="c1"># Create GUI dialog box for user input</span>
<span class="c1">#========================================</span>

<span class="c1"># Get subject name, age, handedness and other information through a dialog box</span>
<span class="n">exp_info</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;participant&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="c1"># participant name as string</span>
            <span class="s1">&#39;age&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="c1"># age name as string</span>
            <span class="s1">&#39;left-handed&#39;</span><span class="p">:</span><span class="kc">False</span><span class="p">,</span> <span class="c1"># handedness as boolean</span>
            <span class="s1">&#39;like this course&#39;</span><span class="p">:(</span><span class="s1">&#39;yes&#39;</span><span class="p">,</span> <span class="s1">&#39;no&#39;</span><span class="p">)</span> <span class="c1"># course feedback as tuple</span>
            <span class="p">}</span>

<span class="c1"># define name of experiment</span>
<span class="n">exp_name</span> <span class="o">=</span> <span class="s1">&#39;pfp_2022&#39;</span> <span class="c1"># set experiment name</span>

<span class="c1"># create GUI dialog box from dictionary</span>
<span class="n">dlg</span> <span class="o">=</span> <span class="n">gui</span><span class="o">.</span><span class="n">DlgFromDict</span><span class="p">(</span><span class="n">dictionary</span><span class="o">=</span><span class="n">exp_info</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="n">exp_name</span><span class="p">)</span>

<span class="c1"># If &#39;Cancel&#39; is pressed, quit experiment</span>
<span class="k">if</span> <span class="n">dlg</span><span class="o">.</span><span class="n">OK</span> <span class="o">==</span> <span class="kc">False</span><span class="p">:</span>
    <span class="n">core</span><span class="o">.</span><span class="n">quit</span><span class="p">()</span>

<span class="c1">#=================================================</span>
<span class="c1"># Data storage: basic information, filename &amp; path</span>
<span class="c1">#=================================================</span>

<span class="c1"># get current working directory for easier creation/saving of files</span>
<span class="n">cwd</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">()</span>

<span class="c1"># Get date and time</span>
<span class="n">exp_info</span><span class="p">[</span><span class="s1">&#39;date&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">getDateStr</span><span class="p">(</span><span class="nb">format</span><span class="o">=</span><span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">_%H_%M&quot;</span><span class="p">)</span> <span class="c1"># get date and time via data module</span>
<span class="n">exp_info</span><span class="p">[</span><span class="s1">&#39;exp_name&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">exp_name</span> <span class="c1"># add experiment name to info dict</span>

<span class="c1"># Check if set data path exists, if not create it</span>
<span class="n">data_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">cwd</span><span class="p">,</span> <span class="n">exp_info</span><span class="p">[</span><span class="s1">&#39;exp_name&#39;</span><span class="p">],</span> <span class="n">exp_info</span><span class="p">[</span><span class="s1">&#39;participant&#39;</span><span class="p">])</span>

<span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">data_path</span><span class="p">):</span>
    <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">data_path</span><span class="p">)</span>  <span class="c1"># create subject directory</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">data_path</span><span class="p">)</span>  <span class="c1"># print subject_directory in terminal</span>


<span class="c1"># Create a unique filename for the experiment data    </span>
<span class="n">data_fname</span> <span class="o">=</span> <span class="n">exp_info</span><span class="p">[</span><span class="s1">&#39;participant&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;_&#39;</span> <span class="o">+</span> <span class="n">exp_info</span><span class="p">[</span><span class="s1">&#39;date&#39;</span><span class="p">]</span> <span class="c1"># create initial file name from participant ID and date/time</span>
<span class="n">data_fname</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">data_path</span><span class="p">,</span> <span class="n">data_fname</span><span class="p">)</span> <span class="c1"># add path from GUI dialog box</span>

<span class="c1">#===============================</span>
<span class="c1"># Creation of window and messages</span>
<span class="c1">#===============================</span>

<span class="c1"># Open a window</span>
<span class="n">win</span> <span class="o">=</span> <span class="n">visual</span><span class="o">.</span><span class="n">Window</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="mi">800</span><span class="p">,</span><span class="mi">600</span><span class="p">),</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;gray&#39;</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="s1">&#39;pix&#39;</span><span class="p">,</span> <span class="n">fullscr</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="c1"># set size, background color, etc. of window</span>

<span class="c1"># Define experiment start text</span>
<span class="n">welcome_message</span> <span class="o">=</span> <span class="n">visual</span><span class="o">.</span><span class="n">TextStim</span><span class="p">(</span><span class="n">win</span><span class="p">,</span>
                                <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Welcome to the experiment. Please press spacebar to continue.&quot;</span><span class="p">,</span>
                                <span class="n">color</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">40</span><span class="p">)</span>


<span class="c1"># Define trial start text</span>
<span class="n">start_message</span> <span class="o">=</span> <span class="n">visual</span><span class="o">.</span><span class="n">TextStim</span><span class="p">(</span><span class="n">win</span><span class="p">,</span>
                                <span class="n">text</span><span class="o">=</span><span class="s2">&quot;In this experiment you will rate different musical artists, snacks and animals on a scale from 1 to 7. Please press the spacebar to start.&quot;</span><span class="p">,</span>
                                <span class="n">color</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">40</span><span class="p">)</span>

<span class="c1"># Define experiment end text</span>
<span class="n">end_message</span> <span class="o">=</span> <span class="n">visual</span><span class="o">.</span><span class="n">TextStim</span><span class="p">(</span><span class="n">win</span><span class="p">,</span>
                                <span class="n">text</span><span class="o">=</span><span class="s2">&quot;You have reached the end of the experiment, thanks for participating.&quot;</span><span class="p">,</span>
                                <span class="n">color</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">40</span><span class="p">)</span>


<span class="c1">#=====================</span>
<span class="c1"># Start the experiment</span>
<span class="c1">#=====================</span>

<span class="c1"># display welcome message</span>
<span class="n">welcome_message</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span> <span class="c1"># draw welcome message to buffer screen</span>
<span class="n">win</span><span class="o">.</span><span class="n">flip</span><span class="p">()</span> <span class="c1"># flip it to the front screen</span>
<span class="n">keys</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">waitKeys</span><span class="p">(</span><span class="n">keyList</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;space&#39;</span><span class="p">,</span> <span class="s1">&#39;escape&#39;</span><span class="p">])</span> <span class="c1"># wait for spacebar key press before advancing or quit when escape is pressed </span>

<span class="c1"># display start message</span>
<span class="n">start_message</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span> <span class="c1"># draw start message to buffer screen</span>
<span class="n">win</span><span class="o">.</span><span class="n">flip</span><span class="p">()</span> <span class="c1"># flip it to the front screen</span>
<span class="n">keys</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">waitKeys</span><span class="p">(</span><span class="n">keyList</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;space&#39;</span><span class="p">,</span> <span class="s1">&#39;escape&#39;</span><span class="p">])</span> <span class="c1"># wait for spacebar key press before advancing or quit when escape is pressed</span>

<span class="c1">#==========================</span>
<span class="c1"># Define the trial sequence</span>
<span class="c1">#==========================</span>

<span class="c1"># define stimuli to be presented</span>
<span class="n">artists</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s1">&#39;Queen Adreena&#39;</span><span class="p">,</span> <span class="s1">&#39;Mac Miller&#39;</span><span class="p">,</span> <span class="s1">&#39;Nirvana&#39;</span><span class="p">,</span> <span class="s1">&#39;Álvaro Soler&#39;</span><span class="p">,</span> <span class="s1">&#39;Kanye West&#39;</span><span class="p">,</span> <span class="s1">&#39;Taylor Swift&#39;</span><span class="p">,</span>
    <span class="s1">&#39;BTS&#39;</span><span class="p">,</span> <span class="s1">&#39;SYML&#39;</span><span class="p">,</span> <span class="s1">&#39;Ed Sheeran&#39;</span><span class="p">,</span> <span class="s1">&#39;Betterov&#39;</span><span class="p">,</span> <span class="s1">&#39;Mark Medlock&#39;</span><span class="p">,</span>
    <span class="s1">&#39;Drake&#39;</span><span class="p">,</span> <span class="s1">&#39;NF&#39;</span><span class="p">,</span> <span class="s1">&#39;Lauv&#39;</span><span class="p">,</span> <span class="s1">&#39;Arctic Monkeys&#39;</span><span class="p">,</span> <span class="s1">&#39;Alfa Mist&#39;</span><span class="p">,</span> <span class="s1">&#39;Nepumuk&#39;</span><span class="p">,</span>
    <span class="s1">&#39;Reezy&#39;</span><span class="p">,</span> <span class="s1">&#39;Cat Burns&#39;</span><span class="p">,</span> <span class="s1">&#39;Aurora&#39;</span><span class="p">,</span> <span class="s1">&#39;Godspeed You! Black Emperor&#39;</span>
<span class="p">]</span>

<span class="c1"># randomize order of presented stimuli</span>
<span class="n">rnd</span><span class="o">.</span><span class="n">shuffle</span><span class="p">(</span><span class="n">artists</span><span class="p">)</span>

<span class="c1">#================================</span>
<span class="c1"># Define a rating scale</span>
<span class="c1">#================================</span>

<span class="n">ratingScale</span> <span class="o">=</span> <span class="n">visual</span><span class="o">.</span><span class="n">RatingScale</span><span class="p">(</span><span class="n">win</span><span class="p">,</span> 
          <span class="n">scale</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>          <span class="c1"># This makes sure there&#39;s no subdivision on the scale</span>
          <span class="n">low</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>               <span class="c1"># This is the minimum value I want the scale to have</span>
          <span class="n">high</span> <span class="o">=</span> <span class="mi">7</span><span class="p">,</span>             <span class="c1"># This is the maximum value of the scale</span>
          <span class="n">showAccept</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>    <span class="c1"># This shows the user&#39;s chosen value in a window below the scale</span>
          <span class="n">markerStart</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>       <span class="c1"># This sets the rating scale to have its marker start on 5</span>
          <span class="n">labels</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;1 - Not at all&#39;</span><span class="p">,</span> <span class="s1">&#39;7 - A lot&#39;</span><span class="p">],</span> <span class="c1"># This creates the labels</span>
          <span class="n">pos</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">80</span><span class="p">])</span> <span class="c1"># set the position of the rating scale within the window</span>


<span class="c1"># define a dictionary to save responses in</span>
<span class="n">data_info</span> <span class="o">=</span> <span class="p">{</span>
<span class="s1">&#39;stimulus&#39;</span><span class="p">:[],</span>
<span class="s1">&#39;rating_rt&#39;</span><span class="p">:[],</span>
<span class="s1">&#39;rating&#39;</span><span class="p">:[],</span>
<span class="s1">&#39;trial_num&#39;</span><span class="p">:[]</span>
<span class="p">}</span>


<span class="c1"># Run through the trials, stimulus by stimulus</span>
<span class="k">for</span> <span class="n">artist</span> <span class="ow">in</span> <span class="n">artists</span><span class="p">:</span>

    <span class="n">ratingScale</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
    <span class="k">while</span> <span class="n">ratingScale</span><span class="o">.</span><span class="n">noResponse</span><span class="p">:</span>  <span class="c1"># show &amp; update until a response has been made</span>

        <span class="c1"># display/draw task question to remind participants</span>
        <span class="n">visual</span><span class="o">.</span><span class="n">TextStim</span><span class="p">(</span><span class="n">win</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s1">&#39;How much do you like the following?&#39;</span><span class="p">,</span> <span class="n">pos</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">90</span><span class="p">],</span> <span class="n">italic</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>
        <span class="c1"># display/draw respective stimulus within each iteration, notice how the stimulus is set &quot;on the fly&quot;</span>
        <span class="n">visual</span><span class="o">.</span><span class="n">TextStim</span><span class="p">(</span><span class="n">win</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="n">artist</span><span class="p">,</span> <span class="n">bold</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">pos</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">30</span><span class="p">],</span> <span class="n">height</span><span class="o">=</span><span class="mi">40</span><span class="p">)</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>
        <span class="c1"># display/draw help message regarding rating scale</span>
        <span class="n">visual</span><span class="o">.</span><span class="n">TextStim</span><span class="p">(</span><span class="n">win</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s1">&#39;(Move the marker along the line and click &quot;enter&quot; to indicate your rating from 1 to 7.)&#39;</span><span class="p">,</span> 
                        <span class="n">pos</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mi">200</span><span class="p">],</span> <span class="n">height</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>
        <span class="c1"># display/draw the rating scale</span>
        <span class="n">ratingScale</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>

        <span class="c1"># after everything is drawn, flip it to the front screen</span>
        <span class="n">win</span><span class="o">.</span><span class="n">flip</span><span class="p">()</span>

        <span class="c1"># if participants press `escape`, stop the experiment</span>
        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">getKeys</span><span class="p">([</span><span class="s1">&#39;escape&#39;</span><span class="p">]):</span>
            <span class="n">core</span><span class="o">.</span><span class="n">quit</span><span class="p">()</span>   
                

    <span class="c1"># get the current rating        </span>
    <span class="n">rating</span> <span class="o">=</span> <span class="n">ratingScale</span><span class="o">.</span><span class="n">getRating</span><span class="p">()</span>
    <span class="c1"># get the response time of the current rating </span>
    <span class="n">rt</span> <span class="o">=</span> <span class="n">ratingScale</span><span class="o">.</span><span class="n">getRT</span><span class="p">()</span>

    <span class="c1"># write trial data into dict</span>
    <span class="n">data_info</span><span class="p">[</span><span class="s1">&#39;stimulus&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">artist</span><span class="p">)</span>
    <span class="n">data_info</span><span class="p">[</span><span class="s1">&#39;rating&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">rating</span><span class="p">)</span>
    <span class="n">data_info</span><span class="p">[</span><span class="s1">&#39;rating_rt&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">rt</span><span class="p">)</span>
    <span class="n">data_info</span><span class="p">[</span><span class="s1">&#39;trial_num&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">trial_counter</span><span class="p">)</span>

    <span class="c1"># if participants press `escape`, stop the experiment</span>
    <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">getKeys</span><span class="p">([</span><span class="s1">&#39;escape&#39;</span><span class="p">]):</span>
        <span class="n">core</span><span class="o">.</span><span class="n">quit</span><span class="p">()</span>   
            
<span class="c1">#======================</span>
<span class="c1"># End of the experiment</span>
<span class="c1">#======================</span>

<span class="c1"># Display end message</span>
<span class="n">end_message</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span> <span class="c1"># draw end message to buffer screen</span>
<span class="n">win</span><span class="o">.</span><span class="n">flip</span><span class="p">()</span> <span class="c1"># flip it to the front screen</span>
<span class="n">keys</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">waitKeys</span><span class="p">(</span><span class="n">keyList</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;space&#39;</span><span class="p">,</span> <span class="s1">&#39;escape&#39;</span><span class="p">])</span> <span class="c1"># wait for spacebar key press before advancing or quit when escape is pressed </span>
</pre></div>
</div>
</div>
</div>
</br>
<p>Let’s give it a try via <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">experiment.py</span></code>. If everything works/is set correctly you should see the <code class="docutils literal notranslate"><span class="pre">GUI</span> <span class="pre">dialog</span> <span class="pre">box</span></code> and after clicking <code class="docutils literal notranslate"><span class="pre">OK</span></code>, the <code class="docutils literal notranslate"><span class="pre">text</span></code> we defined as a welcome message should appear next, followed by the start message. Subsequently, you should see all of our <code class="docutils literal notranslate"><span class="pre">stimuli</span></code> one after another and the same question above them every <code class="docutils literal notranslate"><span class="pre">trial</span></code>, this time not advancing until you provided a <code class="docutils literal notranslate"><span class="pre">rating</span></code>. Finally, you should see the end message.</p>
<p>Our <code class="docutils literal notranslate"><span class="pre">experiment</span></code> works as expected but we don’t get any <code class="docutils literal notranslate"><span class="pre">output</span> <span class="pre">files</span></code>. The reason is once again simple: we actually didn’t tell <code class="docutils literal notranslate"><span class="pre">PsychoPy</span></code> that we would like to <code class="docutils literal notranslate"><span class="pre">save</span></code> our <code class="docutils literal notranslate"><span class="pre">data</span></code> to an <code class="docutils literal notranslate"><span class="pre">output</span> <span class="pre">file</span></code>. Our <code class="docutils literal notranslate"><span class="pre">data</span></code> is uo until now only stored “internally” in our <code class="docutils literal notranslate"><span class="pre">data_info</span></code> dictionary.</p>
</div>
<div class="section" id="saving-data">
<h3>Saving data<a class="headerlink" href="#saving-data" title="Permalink to this headline">¶</a></h3>
<p>Because things work like a charm and we’re using <code class="docutils literal notranslate"><span class="pre">Python</span></code>-based tools, we can make use of the <a class="reference external" href="https://pandas.pydata.org/docs/"><code class="docutils literal notranslate"><span class="pre">Pandas</span></code></a> module, which is great for data handling.</p>
<p>To demonstrate let’s quickly simulate some data. Don’t worry about the following syntax, we’ll just create some list to populate our dictionary with.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy.random</span> <span class="k">as</span> <span class="nn">rnd</span>

<span class="c1"># define a dictionary to save responses in</span>
<span class="n">data_info</span> <span class="o">=</span> <span class="p">{</span>
<span class="s1">&#39;stimulus&#39;</span><span class="p">:[],</span>
<span class="s1">&#39;rating_rt&#39;</span><span class="p">:[],</span>
<span class="s1">&#39;rating&#39;</span><span class="p">:[]</span>
<span class="p">}</span>

<span class="c1"># Let&#39;s generate some lists to add to our dictionary</span>
<span class="n">artists</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s1">&#39;Queen Adreena&#39;</span><span class="p">,</span> <span class="s1">&#39;Mac Miller&#39;</span><span class="p">,</span> <span class="s1">&#39;Nirvana&#39;</span><span class="p">,</span> <span class="s1">&#39;Álvaro Soler&#39;</span><span class="p">,</span> <span class="s1">&#39;Kanye West&#39;</span><span class="p">,</span> <span class="s1">&#39;Taylor Swift&#39;</span><span class="p">,</span>
    <span class="s1">&#39;BTS&#39;</span><span class="p">,</span> <span class="s1">&#39;SYML&#39;</span><span class="p">,</span> <span class="s1">&#39;Ed Sheeran&#39;</span><span class="p">,</span> <span class="s1">&#39;Betterov&#39;</span><span class="p">,</span> <span class="s1">&#39;Mark Medlock&#39;</span><span class="p">,</span>
    <span class="s1">&#39;Drake&#39;</span><span class="p">,</span> <span class="s1">&#39;NF&#39;</span><span class="p">,</span> <span class="s1">&#39;Lauv&#39;</span><span class="p">,</span> <span class="s1">&#39;Arctic Monkeys&#39;</span><span class="p">,</span> <span class="s1">&#39;Alfa Mist&#39;</span><span class="p">,</span> <span class="s1">&#39;Nepumuk&#39;</span><span class="p">,</span>
    <span class="s1">&#39;Reezy&#39;</span><span class="p">,</span> <span class="s1">&#39;Cat Burns&#39;</span><span class="p">,</span> <span class="s1">&#39;Aurora&#39;</span><span class="p">,</span> <span class="s1">&#39;Godspeed You! Black Emperor&#39;</span>
<span class="p">]</span>

<span class="n">rand_ratings</span> <span class="o">=</span> <span class="n">rnd</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">7</span><span class="p">),</span> <span class="mi">21</span><span class="p">)</span>
<span class="n">rand_rating_rts</span> <span class="o">=</span> <span class="n">rnd</span><span class="o">.</span><span class="n">default_rng</span><span class="p">()</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">high</span><span class="o">=</span><span class="mi">7</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">21</span><span class="p">)</span>

<span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">artist</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">artists</span><span class="p">):</span>
    <span class="n">data_info</span><span class="p">[</span><span class="s1">&#39;stimulus&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">artist</span><span class="p">)</span>
    <span class="n">data_info</span><span class="p">[</span><span class="s1">&#39;rating&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">rand_ratings</span><span class="p">[</span><span class="n">idx</span><span class="p">])</span>
    <span class="n">data_info</span><span class="p">[</span><span class="s1">&#39;rating_rt&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">rand_rating_rts</span><span class="p">[</span><span class="n">idx</span><span class="p">])</span>
</pre></div>
</div>
</div>
</div>
<p>Now we can check out the dictionary which we’ve populated with our simulated data</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">data_info</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;stimulus&#39;: [&#39;Queen Adreena&#39;,
  &#39;Mac Miller&#39;,
  &#39;Nirvana&#39;,
  &#39;Álvaro Soler&#39;,
  &#39;Kanye West&#39;,
  &#39;Taylor Swift&#39;,
  &#39;BTS&#39;,
  &#39;SYML&#39;,
  &#39;Ed Sheeran&#39;,
  &#39;Betterov&#39;,
  &#39;Mark Medlock&#39;,
  &#39;Drake&#39;,
  &#39;NF&#39;,
  &#39;Lauv&#39;,
  &#39;Arctic Monkeys&#39;,
  &#39;Alfa Mist&#39;,
  &#39;Nepumuk&#39;,
  &#39;Reezy&#39;,
  &#39;Cat Burns&#39;,
  &#39;Aurora&#39;,
  &#39;Godspeed You! Black Emperor&#39;],
 &#39;rating_rt&#39;: [3.2772442481808426,
  0.656837546073622,
  5.305188597615572,
  3.7109678433592337,
  4.5633028309846795,
  2.7402306429166403,
  2.0620945387131058,
  2.140196245882997,
  0.1112713456839105,
  2.3765529324792376,
  3.2461004928422685,
  1.3123651689988316,
  1.4878501154676924,
  3.8586029309303678,
  4.628222461212935,
  2.965178742457285,
  0.07369319191654722,
  2.6676446688048783,
  2.6950791124336906,
  0.3516332742629801,
  2.416779223648422],
 &#39;rating&#39;: [4, 6, 4, 4, 4, 2, 0, 0, 5, 4, 5, 0, 2, 3, 1, 1, 4, 4, 5, 4, 1]}
</pre></div>
</div>
</div>
</div>
<p>And from that we can create a pandas <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> object via the <a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.from_dict.html"><code class="docutils literal notranslate"><span class="pre">DataFrame.from_dict</span></code></a> function. Which not only looks way better, but allows for powerful data handling tools to be applied to our data directly. Check-out the <a class="reference external" href="https://realpython.com/learning-paths/pandas-data-science/">Pandas for Data-Science learning path</a> to explore this point further.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="n">df_data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">data_info</span><span class="p">)</span>
<span class="n">df_data</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>stimulus</th>
      <th>rating_rt</th>
      <th>rating</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Queen Adreena</td>
      <td>3.277244</td>
      <td>4</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Mac Miller</td>
      <td>0.656838</td>
      <td>6</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Nirvana</td>
      <td>5.305189</td>
      <td>4</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Álvaro Soler</td>
      <td>3.710968</td>
      <td>4</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Kanye West</td>
      <td>4.563303</td>
      <td>4</td>
    </tr>
    <tr>
      <th>5</th>
      <td>Taylor Swift</td>
      <td>2.740231</td>
      <td>2</td>
    </tr>
    <tr>
      <th>6</th>
      <td>BTS</td>
      <td>2.062095</td>
      <td>0</td>
    </tr>
    <tr>
      <th>7</th>
      <td>SYML</td>
      <td>2.140196</td>
      <td>0</td>
    </tr>
    <tr>
      <th>8</th>
      <td>Ed Sheeran</td>
      <td>0.111271</td>
      <td>5</td>
    </tr>
    <tr>
      <th>9</th>
      <td>Betterov</td>
      <td>2.376553</td>
      <td>4</td>
    </tr>
    <tr>
      <th>10</th>
      <td>Mark Medlock</td>
      <td>3.246100</td>
      <td>5</td>
    </tr>
    <tr>
      <th>11</th>
      <td>Drake</td>
      <td>1.312365</td>
      <td>0</td>
    </tr>
    <tr>
      <th>12</th>
      <td>NF</td>
      <td>1.487850</td>
      <td>2</td>
    </tr>
    <tr>
      <th>13</th>
      <td>Lauv</td>
      <td>3.858603</td>
      <td>3</td>
    </tr>
    <tr>
      <th>14</th>
      <td>Arctic Monkeys</td>
      <td>4.628222</td>
      <td>1</td>
    </tr>
    <tr>
      <th>15</th>
      <td>Alfa Mist</td>
      <td>2.965179</td>
      <td>1</td>
    </tr>
    <tr>
      <th>16</th>
      <td>Nepumuk</td>
      <td>0.073693</td>
      <td>4</td>
    </tr>
    <tr>
      <th>17</th>
      <td>Reezy</td>
      <td>2.667645</td>
      <td>4</td>
    </tr>
    <tr>
      <th>18</th>
      <td>Cat Burns</td>
      <td>2.695079</td>
      <td>5</td>
    </tr>
    <tr>
      <th>19</th>
      <td>Aurora</td>
      <td>0.351633</td>
      <td>4</td>
    </tr>
    <tr>
      <th>20</th>
      <td>Godspeed You! Black Emperor</td>
      <td>2.416779</td>
      <td>1</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>We can also simply add lists or elements to our DataFrame as we would do with a dictionary:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Also add data from experiment info gui into DataFrame</span>
<span class="n">exp_name</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;pfp_2022&#39;</span><span class="p">]</span><span class="o">*</span><span class="mi">21</span>
<span class="n">df_data</span><span class="p">[</span><span class="s1">&#39;exp_name&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">exp_name</span>
<span class="n">df_data</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>stimulus</th>
      <th>rating_rt</th>
      <th>rating</th>
      <th>exp_name</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Queen Adreena</td>
      <td>3.277244</td>
      <td>4</td>
      <td>pfp_2022</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Mac Miller</td>
      <td>0.656838</td>
      <td>6</td>
      <td>pfp_2022</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Nirvana</td>
      <td>5.305189</td>
      <td>4</td>
      <td>pfp_2022</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Álvaro Soler</td>
      <td>3.710968</td>
      <td>4</td>
      <td>pfp_2022</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Kanye West</td>
      <td>4.563303</td>
      <td>4</td>
      <td>pfp_2022</td>
    </tr>
    <tr>
      <th>5</th>
      <td>Taylor Swift</td>
      <td>2.740231</td>
      <td>2</td>
      <td>pfp_2022</td>
    </tr>
    <tr>
      <th>6</th>
      <td>BTS</td>
      <td>2.062095</td>
      <td>0</td>
      <td>pfp_2022</td>
    </tr>
    <tr>
      <th>7</th>
      <td>SYML</td>
      <td>2.140196</td>
      <td>0</td>
      <td>pfp_2022</td>
    </tr>
    <tr>
      <th>8</th>
      <td>Ed Sheeran</td>
      <td>0.111271</td>
      <td>5</td>
      <td>pfp_2022</td>
    </tr>
    <tr>
      <th>9</th>
      <td>Betterov</td>
      <td>2.376553</td>
      <td>4</td>
      <td>pfp_2022</td>
    </tr>
    <tr>
      <th>10</th>
      <td>Mark Medlock</td>
      <td>3.246100</td>
      <td>5</td>
      <td>pfp_2022</td>
    </tr>
    <tr>
      <th>11</th>
      <td>Drake</td>
      <td>1.312365</td>
      <td>0</td>
      <td>pfp_2022</td>
    </tr>
    <tr>
      <th>12</th>
      <td>NF</td>
      <td>1.487850</td>
      <td>2</td>
      <td>pfp_2022</td>
    </tr>
    <tr>
      <th>13</th>
      <td>Lauv</td>
      <td>3.858603</td>
      <td>3</td>
      <td>pfp_2022</td>
    </tr>
    <tr>
      <th>14</th>
      <td>Arctic Monkeys</td>
      <td>4.628222</td>
      <td>1</td>
      <td>pfp_2022</td>
    </tr>
    <tr>
      <th>15</th>
      <td>Alfa Mist</td>
      <td>2.965179</td>
      <td>1</td>
      <td>pfp_2022</td>
    </tr>
    <tr>
      <th>16</th>
      <td>Nepumuk</td>
      <td>0.073693</td>
      <td>4</td>
      <td>pfp_2022</td>
    </tr>
    <tr>
      <th>17</th>
      <td>Reezy</td>
      <td>2.667645</td>
      <td>4</td>
      <td>pfp_2022</td>
    </tr>
    <tr>
      <th>18</th>
      <td>Cat Burns</td>
      <td>2.695079</td>
      <td>5</td>
      <td>pfp_2022</td>
    </tr>
    <tr>
      <th>19</th>
      <td>Aurora</td>
      <td>0.351633</td>
      <td>4</td>
      <td>pfp_2022</td>
    </tr>
    <tr>
      <th>20</th>
      <td>Godspeed You! Black Emperor</td>
      <td>2.416779</td>
      <td>1</td>
      <td>pfp_2022</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>if we provoide only a single <code class="docutils literal notranslate"><span class="pre">value</span></code> for a <code class="docutils literal notranslate"><span class="pre">column</span> <span class="pre">key</span></code> pandas does this work for us:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Also add data from experiment info gui into DataFrame</span>
<span class="n">df_data</span><span class="p">[</span><span class="s1">&#39;subject&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;sub_01&#39;</span>
<span class="n">df_data</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>stimulus</th>
      <th>rating_rt</th>
      <th>rating</th>
      <th>exp_name</th>
      <th>subject</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Queen Adreena</td>
      <td>3.277244</td>
      <td>4</td>
      <td>pfp_2022</td>
      <td>sub_01</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Mac Miller</td>
      <td>0.656838</td>
      <td>6</td>
      <td>pfp_2022</td>
      <td>sub_01</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Nirvana</td>
      <td>5.305189</td>
      <td>4</td>
      <td>pfp_2022</td>
      <td>sub_01</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Álvaro Soler</td>
      <td>3.710968</td>
      <td>4</td>
      <td>pfp_2022</td>
      <td>sub_01</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Kanye West</td>
      <td>4.563303</td>
      <td>4</td>
      <td>pfp_2022</td>
      <td>sub_01</td>
    </tr>
    <tr>
      <th>5</th>
      <td>Taylor Swift</td>
      <td>2.740231</td>
      <td>2</td>
      <td>pfp_2022</td>
      <td>sub_01</td>
    </tr>
    <tr>
      <th>6</th>
      <td>BTS</td>
      <td>2.062095</td>
      <td>0</td>
      <td>pfp_2022</td>
      <td>sub_01</td>
    </tr>
    <tr>
      <th>7</th>
      <td>SYML</td>
      <td>2.140196</td>
      <td>0</td>
      <td>pfp_2022</td>
      <td>sub_01</td>
    </tr>
    <tr>
      <th>8</th>
      <td>Ed Sheeran</td>
      <td>0.111271</td>
      <td>5</td>
      <td>pfp_2022</td>
      <td>sub_01</td>
    </tr>
    <tr>
      <th>9</th>
      <td>Betterov</td>
      <td>2.376553</td>
      <td>4</td>
      <td>pfp_2022</td>
      <td>sub_01</td>
    </tr>
    <tr>
      <th>10</th>
      <td>Mark Medlock</td>
      <td>3.246100</td>
      <td>5</td>
      <td>pfp_2022</td>
      <td>sub_01</td>
    </tr>
    <tr>
      <th>11</th>
      <td>Drake</td>
      <td>1.312365</td>
      <td>0</td>
      <td>pfp_2022</td>
      <td>sub_01</td>
    </tr>
    <tr>
      <th>12</th>
      <td>NF</td>
      <td>1.487850</td>
      <td>2</td>
      <td>pfp_2022</td>
      <td>sub_01</td>
    </tr>
    <tr>
      <th>13</th>
      <td>Lauv</td>
      <td>3.858603</td>
      <td>3</td>
      <td>pfp_2022</td>
      <td>sub_01</td>
    </tr>
    <tr>
      <th>14</th>
      <td>Arctic Monkeys</td>
      <td>4.628222</td>
      <td>1</td>
      <td>pfp_2022</td>
      <td>sub_01</td>
    </tr>
    <tr>
      <th>15</th>
      <td>Alfa Mist</td>
      <td>2.965179</td>
      <td>1</td>
      <td>pfp_2022</td>
      <td>sub_01</td>
    </tr>
    <tr>
      <th>16</th>
      <td>Nepumuk</td>
      <td>0.073693</td>
      <td>4</td>
      <td>pfp_2022</td>
      <td>sub_01</td>
    </tr>
    <tr>
      <th>17</th>
      <td>Reezy</td>
      <td>2.667645</td>
      <td>4</td>
      <td>pfp_2022</td>
      <td>sub_01</td>
    </tr>
    <tr>
      <th>18</th>
      <td>Cat Burns</td>
      <td>2.695079</td>
      <td>5</td>
      <td>pfp_2022</td>
      <td>sub_01</td>
    </tr>
    <tr>
      <th>19</th>
      <td>Aurora</td>
      <td>0.351633</td>
      <td>4</td>
      <td>pfp_2022</td>
      <td>sub_01</td>
    </tr>
    <tr>
      <th>20</th>
      <td>Godspeed You! Black Emperor</td>
      <td>2.416779</td>
      <td>1</td>
      <td>pfp_2022</td>
      <td>sub_01</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>But let’s get to actually saving our data. For that we use the <a class="reference external" href="https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.to_csv.html"><code class="docutils literal notranslate"><span class="pre">.to_csv()</span></code></a> method of the <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code>
object. We have to further specify</p>
<ul class="simple">
<li><p>where our file should be stored/how it’s called</p></li>
<li><p>the file extension, e.g. .csv/.txt etc.</p></li>
<li><p>a delimiter (to separate chunks of data)</p></li>
</ul>
<p>We can also specify a lot more, such as the exclusion of a nummeric index column that pandas otherwise adds to our file via:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>index=False
</pre></div>
</div>
<p><em>Check this <a class="reference external" href="https://www.digitalocean.com/community/tutorials/pandas-to_csv-convert-dataframe-to-csv">tutorial</a> for more info on what else this function can do</em></p>
<p>Let’s try that</p>
<p>First define a name for your file.</p>
<p><em>Importantly this name will be handeld in respect to your current working directory, so if you are in your <code class="docutils literal notranslate"><span class="pre">Desktop</span></code> directory right now, it will be created there. Therefore if you’re calling your file /Path/to/Desktop/file_name you will get an error, as such an folder doesn’t exist starting from your desktop. I.e. python would look for  /Path/to/Desktop/Path/to/Desktop/file_name.</em></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">data_fname</span> <span class="o">=</span> <span class="s1">&#39;test_simulated data&#39;</span>
</pre></div>
</div>
</div>
</div>
<p>Now we use the <code class="docutils literal notranslate"><span class="pre">.to_csv</span></code> function to save our data, provided our specification</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df_data</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">data_fname</span> <span class="o">+</span> <span class="s1">&#39;.csv&#39;</span><span class="p">,</span> <span class="n">sep</span> <span class="o">=</span> <span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>And a quick <code class="docutils literal notranslate"><span class="pre">ls</span></code> shows us that we’ve just created a new file in our current working directory</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ls</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> create_dialogue_box.py        psyhopy_while_loop.py
 display_instructions.py       rating_artists.py
 experiments.md                rating_for_loop.py
 flanker_task_no_comments.py   rating_pictures.py
 intro_psychopy_I.ipynb        rating_task.py
 psychopy_for_loop.py         &#39;test_simulated data.csv&#39;
</pre></div>
</div>
</div>
</div>
<p>Now let’s put it all together</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#===============</span>
<span class="c1"># Import modules</span>
<span class="c1">#===============</span>

<span class="kn">from</span> <span class="nn">psychopy</span> <span class="kn">import</span> <span class="n">gui</span><span class="p">,</span> <span class="n">core</span><span class="p">,</span> <span class="n">visual</span><span class="p">,</span> <span class="n">event</span><span class="p">,</span> <span class="n">data</span> <span class="c1"># import psychopy modules/functions</span>
<span class="kn">import</span> <span class="nn">os</span> <span class="c1"># import os module</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">numpy.random</span> <span class="k">as</span> <span class="nn">rnd</span> <span class="c1"># import random module from numpy</span>

<span class="c1">#========================================</span>
<span class="c1"># Create GUI dialog box for user input</span>
<span class="c1">#========================================</span>

<span class="c1"># Get subject name, age, handedness and other information through a dialog box</span>
<span class="n">exp_info</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;participant&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="c1"># participant name as string</span>
            <span class="s1">&#39;age&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="c1"># age name as string</span>
            <span class="s1">&#39;left-handed&#39;</span><span class="p">:</span><span class="kc">False</span><span class="p">,</span> <span class="c1"># handedness as boolean</span>
            <span class="s1">&#39;like this course&#39;</span><span class="p">:(</span><span class="s1">&#39;yes&#39;</span><span class="p">,</span> <span class="s1">&#39;no&#39;</span><span class="p">)</span> <span class="c1"># course feedback as tuple</span>
            <span class="p">}</span>

<span class="c1"># define name of experiment</span>
<span class="n">exp_name</span> <span class="o">=</span> <span class="s1">&#39;pfp_2022&#39;</span> <span class="c1"># set experiment name</span>

<span class="c1"># create GUI dialog box from dictionary</span>
<span class="n">dlg</span> <span class="o">=</span> <span class="n">gui</span><span class="o">.</span><span class="n">DlgFromDict</span><span class="p">(</span><span class="n">dictionary</span><span class="o">=</span><span class="n">exp_info</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="n">exp_name</span><span class="p">)</span>

<span class="c1"># If &#39;Cancel&#39; is pressed, quit experiment</span>
<span class="k">if</span> <span class="n">dlg</span><span class="o">.</span><span class="n">OK</span> <span class="o">==</span> <span class="kc">False</span><span class="p">:</span>
    <span class="n">core</span><span class="o">.</span><span class="n">quit</span><span class="p">()</span>

<span class="c1">#=================================================</span>
<span class="c1"># Data storage: basic information, filename &amp; path</span>
<span class="c1">#=================================================</span>

<span class="c1"># get current working directory for easier creation/saving of files</span>
<span class="n">cwd</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">()</span>

<span class="c1"># Get date and time</span>
<span class="n">exp_info</span><span class="p">[</span><span class="s1">&#39;date&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">getDateStr</span><span class="p">(</span><span class="nb">format</span><span class="o">=</span><span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">_%H_%M&quot;</span><span class="p">)</span> <span class="c1"># get date and time via data module</span>
<span class="n">exp_info</span><span class="p">[</span><span class="s1">&#39;exp_name&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">exp_name</span> <span class="c1"># add experiment name to info dict</span>

<span class="c1"># Check if set data path exists, if not create it</span>
<span class="n">data_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">cwd</span><span class="p">,</span> <span class="n">exp_info</span><span class="p">[</span><span class="s1">&#39;exp_name&#39;</span><span class="p">],</span> <span class="n">exp_info</span><span class="p">[</span><span class="s1">&#39;participant&#39;</span><span class="p">])</span>

<span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">data_path</span><span class="p">):</span>
    <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">data_path</span><span class="p">)</span>  <span class="c1"># create subject directory</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">data_path</span><span class="p">)</span>  <span class="c1"># print subject_directory in terminal</span>


<span class="c1"># Create a unique filename for the experiment data    </span>
<span class="n">data_fname</span> <span class="o">=</span> <span class="n">exp_info</span><span class="p">[</span><span class="s1">&#39;participant&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;_&#39;</span> <span class="o">+</span> <span class="n">exp_info</span><span class="p">[</span><span class="s1">&#39;date&#39;</span><span class="p">]</span> <span class="c1"># create initial file name from participant ID and date/time</span>
<span class="n">data_fname</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">data_path</span><span class="p">,</span> <span class="n">data_fname</span><span class="p">)</span> <span class="c1"># add path from GUI dialog box</span>

<span class="c1">#===============================</span>
<span class="c1"># Creation of window and messages</span>
<span class="c1">#===============================</span>

<span class="c1"># Open a window</span>
<span class="n">win</span> <span class="o">=</span> <span class="n">visual</span><span class="o">.</span><span class="n">Window</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="mi">800</span><span class="p">,</span><span class="mi">600</span><span class="p">),</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;gray&#39;</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="s1">&#39;pix&#39;</span><span class="p">,</span> <span class="n">fullscr</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="c1"># set size, background color, etc. of window</span>

<span class="c1"># Define experiment start text</span>
<span class="n">welcome_message</span> <span class="o">=</span> <span class="n">visual</span><span class="o">.</span><span class="n">TextStim</span><span class="p">(</span><span class="n">win</span><span class="p">,</span>
                                <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Welcome to the experiment. Please press spacebar to continue.&quot;</span><span class="p">,</span>
                                <span class="n">color</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">40</span><span class="p">)</span>


<span class="c1"># Define trial start text</span>
<span class="n">start_message</span> <span class="o">=</span> <span class="n">visual</span><span class="o">.</span><span class="n">TextStim</span><span class="p">(</span><span class="n">win</span><span class="p">,</span>
                                <span class="n">text</span><span class="o">=</span><span class="s2">&quot;In this experiment you will rate different musical artists, snacks and animals on a scale from 1 to 7. Please press the spacebar to start.&quot;</span><span class="p">,</span>
                                <span class="n">color</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">40</span><span class="p">)</span>

<span class="c1"># Define experiment end text</span>
<span class="n">end_message</span> <span class="o">=</span> <span class="n">visual</span><span class="o">.</span><span class="n">TextStim</span><span class="p">(</span><span class="n">win</span><span class="p">,</span>
                                <span class="n">text</span><span class="o">=</span><span class="s2">&quot;You have reached the end of the experiment, thanks for participating.&quot;</span><span class="p">,</span>
                                <span class="n">color</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">40</span><span class="p">)</span>


<span class="c1">#=====================</span>
<span class="c1"># Start the experiment</span>
<span class="c1">#=====================</span>

<span class="c1"># display welcome message</span>
<span class="n">welcome_message</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span> <span class="c1"># draw welcome message to buffer screen</span>
<span class="n">win</span><span class="o">.</span><span class="n">flip</span><span class="p">()</span> <span class="c1"># flip it to the front screen</span>
<span class="n">keys</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">waitKeys</span><span class="p">(</span><span class="n">keyList</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;space&#39;</span><span class="p">,</span> <span class="s1">&#39;escape&#39;</span><span class="p">])</span> <span class="c1"># wait for spacebar key press before advancing or quit when escape is pressed </span>

<span class="c1"># display start message</span>
<span class="n">start_message</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span> <span class="c1"># draw start message to buffer screen</span>
<span class="n">win</span><span class="o">.</span><span class="n">flip</span><span class="p">()</span> <span class="c1"># flip it to the front screen</span>
<span class="n">keys</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">waitKeys</span><span class="p">(</span><span class="n">keyList</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;space&#39;</span><span class="p">,</span> <span class="s1">&#39;escape&#39;</span><span class="p">])</span> <span class="c1"># wait for spacebar key press before advancing or quit when escape is pressed</span>

<span class="c1">#==========================</span>
<span class="c1"># Define the trial sequence</span>
<span class="c1">#==========================</span>

<span class="c1"># define stimuli to be presented</span>
<span class="n">artists</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s1">&#39;Queen Adreena&#39;</span><span class="p">,</span> <span class="s1">&#39;Mac Miller&#39;</span><span class="p">,</span> <span class="s1">&#39;Nirvana&#39;</span><span class="p">,</span> <span class="s1">&#39;Álvaro Soler&#39;</span><span class="p">,</span> <span class="s1">&#39;Kanye West&#39;</span><span class="p">,</span> <span class="s1">&#39;Taylor Swift&#39;</span><span class="p">,</span>
    <span class="s1">&#39;BTS&#39;</span><span class="p">,</span> <span class="s1">&#39;SYML&#39;</span><span class="p">,</span> <span class="s1">&#39;Ed Sheeran&#39;</span><span class="p">,</span> <span class="s1">&#39;Betterov&#39;</span><span class="p">,</span> <span class="s1">&#39;Mark Medlock&#39;</span><span class="p">,</span>
    <span class="s1">&#39;Drake&#39;</span><span class="p">,</span> <span class="s1">&#39;NF&#39;</span><span class="p">,</span> <span class="s1">&#39;Lauv&#39;</span><span class="p">,</span> <span class="s1">&#39;Arctic Monkeys&#39;</span><span class="p">,</span> <span class="s1">&#39;Alfa Mist&#39;</span><span class="p">,</span> <span class="s1">&#39;Nepumuk&#39;</span><span class="p">,</span>
    <span class="s1">&#39;Reezy&#39;</span><span class="p">,</span> <span class="s1">&#39;Cat Burns&#39;</span><span class="p">,</span> <span class="s1">&#39;Aurora&#39;</span><span class="p">,</span> <span class="s1">&#39;Godspeed You! Black Emperor&#39;</span>
<span class="p">]</span>

<span class="c1"># randomize order of presented stimuli</span>
<span class="n">rnd</span><span class="o">.</span><span class="n">shuffle</span><span class="p">(</span><span class="n">artists</span><span class="p">)</span>

<span class="c1">#================================</span>
<span class="c1"># Define a rating scale</span>
<span class="c1">#================================</span>

<span class="n">ratingScale</span> <span class="o">=</span> <span class="n">visual</span><span class="o">.</span><span class="n">RatingScale</span><span class="p">(</span><span class="n">win</span><span class="p">,</span> 
          <span class="n">scale</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>          <span class="c1"># This makes sure there&#39;s no subdivision on the scale</span>
          <span class="n">low</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>               <span class="c1"># This is the minimum value I want the scale to have</span>
          <span class="n">high</span> <span class="o">=</span> <span class="mi">7</span><span class="p">,</span>             <span class="c1"># This is the maximum value of the scale</span>
          <span class="n">showAccept</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>    <span class="c1"># This shows the user&#39;s chosen value in a window below the scale</span>
          <span class="n">markerStart</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>       <span class="c1"># This sets the rating scale to have its marker start on 5</span>
          <span class="n">labels</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;1 - Not at all&#39;</span><span class="p">,</span> <span class="s1">&#39;7 - A lot&#39;</span><span class="p">],</span> <span class="c1"># This creates the labels</span>
          <span class="n">pos</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">80</span><span class="p">])</span> <span class="c1"># set the position of the rating scale within the window</span>

<span class="n">trial_counter</span> <span class="o">=</span> <span class="mi">0</span>

<span class="c1"># define a dictionary to save responses in</span>
<span class="n">data_info</span> <span class="o">=</span> <span class="p">{</span>
<span class="s1">&#39;stimulus&#39;</span><span class="p">:[],</span>
<span class="s1">&#39;rating_rt&#39;</span><span class="p">:[],</span>
<span class="s1">&#39;rating&#39;</span><span class="p">:[],</span>
<span class="s1">&#39;trial_num&#39;</span><span class="p">:[]</span>
<span class="p">}</span>


<span class="c1"># Run through the trials, stimulus by stimulus</span>
<span class="k">for</span> <span class="n">artist</span> <span class="ow">in</span> <span class="n">artists</span><span class="p">:</span>

    <span class="n">ratingScale</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
    <span class="k">while</span> <span class="n">ratingScale</span><span class="o">.</span><span class="n">noResponse</span><span class="p">:</span>  <span class="c1"># show &amp; update until a response has been made</span>

        <span class="c1"># display/draw task question to remind participants</span>
        <span class="n">visual</span><span class="o">.</span><span class="n">TextStim</span><span class="p">(</span><span class="n">win</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s1">&#39;How much do you like the following?&#39;</span><span class="p">,</span> <span class="n">pos</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">90</span><span class="p">],</span> <span class="n">italic</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>
        <span class="c1"># display/draw respective stimulus within each iteration, notice how the stimulus is set &quot;on the fly&quot;</span>
        <span class="n">visual</span><span class="o">.</span><span class="n">TextStim</span><span class="p">(</span><span class="n">win</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="n">artist</span><span class="p">,</span> <span class="n">bold</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">pos</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">30</span><span class="p">],</span> <span class="n">height</span><span class="o">=</span><span class="mi">40</span><span class="p">)</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>
        <span class="c1"># display/draw help message regarding rating scale</span>
        <span class="n">visual</span><span class="o">.</span><span class="n">TextStim</span><span class="p">(</span><span class="n">win</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s1">&#39;(Move the marker along the line and click &quot;enter&quot; to indicate your rating from 1 to 7.)&#39;</span><span class="p">,</span> 
                        <span class="n">pos</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mi">200</span><span class="p">],</span> <span class="n">height</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>
        <span class="c1"># display/draw the rating scale</span>
        <span class="n">ratingScale</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>

        <span class="c1"># after everything is drawn, flip it to the front screen</span>
        <span class="n">win</span><span class="o">.</span><span class="n">flip</span><span class="p">()</span>

        <span class="c1"># if participants press `escape`, stop the experiment</span>
        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">getKeys</span><span class="p">([</span><span class="s1">&#39;escape&#39;</span><span class="p">]):</span>
            <span class="n">core</span><span class="o">.</span><span class="n">quit</span><span class="p">()</span>   
                

    <span class="c1"># get the current rating        </span>
    <span class="n">rating</span> <span class="o">=</span> <span class="n">ratingScale</span><span class="o">.</span><span class="n">getRating</span><span class="p">()</span>
    <span class="c1"># get the response time of the current rating </span>
    <span class="n">rt</span> <span class="o">=</span> <span class="n">ratingScale</span><span class="o">.</span><span class="n">getRT</span><span class="p">()</span>

    <span class="c1"># write trial data into dict</span>
    <span class="n">data_info</span><span class="p">[</span><span class="s1">&#39;stimulus&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">artist</span><span class="p">)</span>
    <span class="n">data_info</span><span class="p">[</span><span class="s1">&#39;rating&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">rating</span><span class="p">)</span>
    <span class="n">data_info</span><span class="p">[</span><span class="s1">&#39;rating_rt&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">rt</span><span class="p">)</span>
    <span class="n">data_info</span><span class="p">[</span><span class="s1">&#39;trial_num&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">trial_counter</span><span class="p">)</span>

    <span class="c1"># if participants press `escape`, stop the experiment</span>
    <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">getKeys</span><span class="p">([</span><span class="s1">&#39;escape&#39;</span><span class="p">]):</span>
        <span class="n">core</span><span class="o">.</span><span class="n">quit</span><span class="p">()</span>   
            

    <span class="n">trial_counter</span> <span class="o">+=</span> <span class="mi">1</span>


<span class="c1">#======================</span>
<span class="c1"># End of the experiment</span>
<span class="c1">#======================</span>

<span class="c1"># Display end message</span>
<span class="n">end_message</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span> <span class="c1"># draw end message to buffer screen</span>
<span class="n">win</span><span class="o">.</span><span class="n">flip</span><span class="p">()</span> <span class="c1"># flip it to the front screen</span>
<span class="n">keys</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">waitKeys</span><span class="p">(</span><span class="n">keyList</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;space&#39;</span><span class="p">,</span> <span class="s1">&#39;escape&#39;</span><span class="p">])</span> <span class="c1"># wait for spacebar key press before advancing or quit when escape is pressed</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Experiment ended&#39;</span> <span class="o">+</span> <span class="n">data</span><span class="o">.</span><span class="n">getDateStr</span><span class="p">(</span><span class="nb">format</span><span class="o">=</span><span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">_%H_M&quot;</span><span class="p">))</span>

<span class="c1">#======================</span>
<span class="c1"># Save your Data</span>
<span class="c1">#======================</span>
<span class="c1"># create a &quot;DataFrame&quot; for easier file handling</span>

<span class="n">df_data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">data_info</span><span class="p">)</span>

<span class="c1"># Also add data from experiment info gui into DataFrame</span>
<span class="n">df_data</span><span class="p">[</span><span class="s1">&#39;subject&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">exp_info</span><span class="p">[</span><span class="s1">&#39;participant&#39;</span><span class="p">]</span>
<span class="n">df_data</span><span class="p">[</span><span class="s1">&#39;date&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">exp_info</span><span class="p">[</span><span class="s1">&#39;date&#39;</span><span class="p">]</span>
<span class="n">df_data</span><span class="p">[</span><span class="s1">&#39;left_handed&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">exp_info</span><span class="p">[</span><span class="s1">&#39;left-handed&#39;</span><span class="p">]</span>
<span class="n">df_data</span><span class="p">[</span><span class="s1">&#39;exp_name&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">exp_info</span><span class="p">[</span><span class="s1">&#39;exp_name&#39;</span><span class="p">]</span>

<span class="c1"># save Dataframe as .csv</span>
<span class="nb">print</span><span class="p">(</span><span class="n">df_data</span><span class="p">)</span>
<span class="n">df_data</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">data_fname</span> <span class="o">+</span> <span class="s1">&#39;.csv&#39;</span><span class="p">,</span> <span class="n">sep</span> <span class="o">=</span> <span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</br>
<p>If you’d now try it again, everything should work as before but after finishing the <code class="docutils literal notranslate"><span class="pre">experiment</span></code> you should see a new <code class="docutils literal notranslate"><span class="pre">file</span></code> within the indicated <code class="docutils literal notranslate"><span class="pre">data</span> <span class="pre">path</span></code> containing all <code class="docutils literal notranslate"><span class="pre">information</span></code> stored about the <code class="docutils literal notranslate"><span class="pre">experiment</span></code>: <code class="docutils literal notranslate"><span class="pre">trials</span></code>, <code class="docutils literal notranslate"><span class="pre">stimuli</span></code>, <code class="docutils literal notranslate"><span class="pre">responses</span></code>, <code class="docutils literal notranslate"><span class="pre">reaction</span> <span class="pre">times</span></code>, etc. .</p>
</div>
</div>
<div class="section" id="a-very-simple-experiment">
<h2>A very simple experiment<a class="headerlink" href="#a-very-simple-experiment" title="Permalink to this headline">¶</a></h2>
<p>Believe it or not folks, with that we already created our first working <code class="docutils literal notranslate"><span class="pre">PsychoPy</span></code> <code class="docutils literal notranslate"><span class="pre">experiment</span></code>. Using only a small amount of, <em>very readable</em>, <code class="docutils literal notranslate"><span class="pre">code</span></code>, we can obtain <code class="docutils literal notranslate"><span class="pre">ratings</span></code> for our <code class="docutils literal notranslate"><span class="pre">stimuli</span></code>. Obviously, this is a very simple <code class="docutils literal notranslate"><span class="pre">experiment</span></code> but nevertheless a good start, showcasing a lot of the core things you should know to start using <code class="docutils literal notranslate"><span class="pre">PsychoPy</span></code> for <code class="docutils literal notranslate"><span class="pre">experiments</span></code>. All the things addressed here are usually also part of much more complex <code class="docutils literal notranslate"><span class="pre">experiments</span></code>, as well as build their basis. For an overview on how to add to this (e.g. our snacks and animals list) head over to the <a class="reference external" href="https://m-earnest.github.io/Python_for_Psychologists_Winter2022/experiments/experiments.html">slides</a> or the <a class="reference external" href="https://github.com/M-earnest/Python_for_Psychologists_Winter2022/blob/main/lecture/experiments/rating_artists.py"><code class="docutils literal notranslate"><span class="pre">rating_artists.py</span></code></a> script. For an overview on how the same framweork can be used for e.g. a reaction-time task look into the [<code class="docutils literal notranslate"><span class="pre">flanker_task.py</span></code>] script. If you consider using psychopy for your experiments (which you definetly should!) it’s always a good idea to check google for possible implementations of experiment ideas close to whatever you’re trying to accomplish.</p>
<img align="center" src="https://raw.githubusercontent.com/PeerHerholz/Python_for_Psychologists_Winter2021/master/lecture/static/experiment_outline.png" alt="logo" title="jupyter" width="800" height="350" /> </div>
<div class="section" id="outro">
<h2>Outro<a class="headerlink" href="#outro" title="Permalink to this headline">¶</a></h2>
<p>As usually: awesome work folks! The transition from basic <code class="docutils literal notranslate"><span class="pre">Python</span></code> aspects to applied together is definitely no cake-walk, especially when simultaneously switching to <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">scripts</span></code> from <code class="docutils literal notranslate"><span class="pre">jupyter</span> <span class="pre">notebooks</span></code> but you did a great job!
Feel free to explore the other aspects of the coures website for further insights on what you can do with Python.</p>
<p><strong>Thank so much for sticking with us throughout this!</strong></p>
<img align="center" src="https://media1.giphy.com/media/Y2bC3o5BkYNndT4vbK/giphy.gif?cid=790b7611efb3ab9e8609b1d019b214ade942084c480d68a9&rid=giphy.gif&ct=g" title="jupyter" width="600" height="300" /> 
<center><a href="https://giphy.com/gifs/hallmarkecards-wow-otter-otterly-amazing-Y2bC3o5BkYNndT4vbK">via GIPHY</a></center><div class="section" id="homework-assignment-6">
<h3>Homework assignment #6<a class="headerlink" href="#homework-assignment-6" title="Permalink to this headline">¶</a></h3>
<p>Your sixth and last homework assignment will entail the generation of a “new” psychopy experiment</p>
<ul class="simple">
<li><p>You are free to copy any of the existing experiments, in the experiments folder or that were presented in the lesson</p></li>
<li><p>but at least change the instruction, stimuli and file/experiment name</p></li>
<li><p>you get full marks, if the experiment runs without crashes, collects participant input in a gui dialogue, logs responses and outputs a .csv file which contains the collected data</p></li>
<li><p>Bonus: Use a different stimulus modality</p></li>
</ul>
<p>Save it as a .py file and e-mail it to <a class="reference external" href="mailto:ernst&#37;&#52;&#48;psych&#46;uni-frankfurt&#46;de">ernst<span>&#64;</span>psych<span>&#46;</span>uni-frankfurt<span>&#46;</span>de</a></p>
<p><strong>Deadline: 23/12/2023, 11:59 PM EST</strong></p>
</div>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./experiments"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
            
                <!-- Previous / next buttons -->
<div class='prev-next-area'> 
    <a class='left-prev' id="prev-link" href="experiments.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Running experiments in Python</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="../showcases/module_showcases.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Python module showcases</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            
        </div>
    </div>
    <footer class="footer">
  <p>
    
      By Peer Herholz<br/>
    
        &copy; Copyright 2020.<br/>
  </p>
</footer>
</main>


      </div>
    </div>
  
  <script src="../_static/js/index.be7d3bbb2ef33a8344ce.js"></script>

  </body>
</html>